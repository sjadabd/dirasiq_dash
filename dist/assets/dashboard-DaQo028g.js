import C from"./teacher_api-DyrQANjO.js";import{r as h,m as L,k as Q,c as w,b as s,e,o as f,d as a,f as y,p as m,s as r,t as n,n as S,v as B,b9 as T,F as j,b0 as F,x as U}from"./index-N2EhsRQt.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as E}from"./VContainer-eIbLdFnW.js";import{V as k,a as l}from"./VRow--YcB0Yd0.js";import{V as u}from"./VCard-CTAW927Q.js";import{V as O}from"./VAvatar-M6cRQjPV.js";import{V as J}from"./VImg-DOYF3Gzb.js";import{V as M}from"./VChip-v8q_B89j.js";import"./axios-CK0PAUQZ.js";import"./VCardText-Q2eeque7.js";const Y={class:"teacher-dashboard"},G={class:"text-h4 mb-2"},H={class:"text-body-1 mb-0"},K={class:"text-caption mt-2"},W={style:{display:"flex","flex-wrap":"wrap","flex-direction":"row","align-items":"center",gap:"8px"}},X=["src"],Z={class:"text-h5"},tt={class:"text-h5"},et={class:"text-h5"},st={class:"text-h5"},at={class:"text-h5"},ot={class:"text-h5"},it={class:"d-flex justify-center py-6"},lt={class:"text-h4"},nt={class:"text-h4"},rt={class:"text-h4"},dt={class:"text-h4"},mt={class:"text-h4"},ut={class:"d-flex justify-center py-6"},ct={class:"d-flex align-center justify-space-between mb-2"},pt={class:"text-subtitle-1 fw-600"},ft={class:"text-body-1 mb-1"},vt={class:"text-body-2 text-medium-emphasis"},xt={__name:"dashboard",setup(bt){const q=Q(),v=h(null),D=h(!0),N=h(!0),c=h({totalStudents:0,totalCourses:0,activeStudents:0,activeCourses:0,sessionsToday:0,totalDeposit:0,receivedDeposit:0,remainingDeposit:0,studentTotalDue:0,studentAmountPaid:0,studentAmountRemaining:0}),z=h([]),P=p=>{switch((p||"").toLowerCase()){case"confirmed":return"Ù…Ø¤ÙƒØ¯Ø©";case"pending":return"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±";case"cancelled":return"Ù…Ù„ØºØ§Ø©";case"rejected":return"Ù…Ø±ÙÙˆØ¶Ø©";default:return p||""}},g=p=>{const t=Number(p??0);try{return new Intl.NumberFormat("en-IQ").format(t)+" Ø¯.Ø¹"}catch{return(t||0).toLocaleString("en-IQ")+" Ø¯.Ø¹"}};L(async()=>{var t,i,x,b,_,V,I,A;const p=localStorage.getItem("user");if(p)v.value=JSON.parse(p);else{q.push("/login");return}try{const d=await C.getDashboard(),o=((t=d==null?void 0:d.data)==null?void 0:t.data)??(d==null?void 0:d.data)??{};c.value={totalStudents:Number(o.totalStudents??0),totalCourses:Number(o.totalCourses??0),activeStudents:Number(o.activeStudents??0),activeCourses:Number(o.activeCourses??0),sessionsToday:Number(o.sessionsToday??0),totalDeposit:Number(o.totalDeposit??((i=o==null?void 0:o.depositInvoices)==null?void 0:i.totalAmount)??0),receivedDeposit:Number(o.receivedDeposit??((x=o==null?void 0:o.depositInvoices)==null?void 0:x.receivedAmount)??0),remainingDeposit:Number(o.remainingDeposit??((b=o==null?void 0:o.depositInvoices)==null?void 0:b.remainingAmount)??0),studentTotalDue:Number(((_=o==null?void 0:o.studentInvoices)==null?void 0:_.totalDue)??0),studentAmountPaid:Number(((V=o==null?void 0:o.studentInvoices)==null?void 0:V.amountPaid)??0),studentAmountRemaining:Number(((I=o==null?void 0:o.studentInvoices)==null?void 0:I.amountRemaining)??0)}}catch(d){console.warn("Failed to load teacher dashboard:",d)}finally{D.value=!1}try{const d=await C.getUpcomingToday(),o=((A=d==null?void 0:d.data)==null?void 0:A.data)??[];z.value=Array.isArray(o)?o:[]}catch(d){console.warn("Failed to load upcoming today:",d)}finally{N.value=!1}});const R=()=>{var b;const p=(b=v.value)==null?void 0:b.qr;if(!p)return;const t=`https://api.mulhimiq.com${p}`,i=window.open("","_blank");if(!i)return;const x=`<!DOCTYPE html>
  <html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <title>Ø·Ø¨Ø§Ø¹Ø© Ø±Ù…Ø² Ø§Ù„Ø­Ø¶ÙˆØ±</title>
    <style>
      @page { size: A4 portrait; margin: 20mm; }
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Naskh Arabic", Arial, sans-serif; }
      .container { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: calc(100vh - 40mm); text-align: center; }
      h1 { margin: 0 0 12px; font-size: 24px; }
      p { margin: 0 0 20px; font-size: 18px; }
      img { width: 260px; height: 260px; object-fit: contain; }
      .note { margin-top: 16px; font-size: 14px; color: #555; }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø¹Ø¨Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h1>
      <p>ÙŠØ±Ø¬Ù‰ Ù…Ù† Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ø³Ø­ Ø±Ù…Ø² QR Ø£Ø¯Ù†Ø§Ù‡ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ±Ùƒ.</p>
      <img src="${t}" alt="Ø±Ù…Ø² Ø­Ø¶ÙˆØ± Ø§Ù„Ø·Ù„Ø§Ø¨" />
      <div class="note">ÙÙŠ Ø­Ø§Ù„ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ù…Ø³Ø­ØŒ ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø¹Ù„Ù….</div>
    </div>
    <script>
      window.onload = function() { setTimeout(function(){ window.print(); window.close(); }, 300); };
    <\/script>
  </body>
  </html>`;i.document.open(),i.document.write(x),i.document.close()};return(p,t)=>(f(),w("div",Y,[s(E,{fluid:"",class:"pa-6"},{default:e(()=>[s(k,{class:"mb-6"},{default:e(()=>[s(l,{cols:"12"},{default:e(()=>[s(u,{color:"primary",variant:"tonal",class:"pa-6"},{default:e(()=>[s(k,{align:"center"},{default:e(()=>[s(l,{cols:"12",md:"6",style:{display:"flex","flex-wrap":"wrap","flex-direction":"row","align-items":"center",gap:"8px"}},{default:e(()=>{var i,x,b;return[s(O,{size:"80",color:"primary"},{default:e(()=>{var _;return[(_=v.value)!=null&&_.profileImagePath?(f(),y(J,{key:0,src:`https://api.mulhimiq.com${v.value.profileImagePath}`,alt:"User Avatar",cover:""},null,8,["src"])):(f(),y(m,{key:1,size:"40"},{default:e(()=>t[0]||(t[0]=[r("mdi-account")])),_:1}))]}),_:1}),a("div",null,[a("h1",G,"Ù…Ø±Ø­Ø¨Ø§Ù‹ "+n((i=v.value)==null?void 0:i.name)+"! ğŸ‘‹",1),a("p",H,n((x=v.value)==null?void 0:x.email),1),a("p",K," Ø¹Ø¶Ùˆ Ù…Ù†Ø° "+n(new Date((b=v.value)==null?void 0:b.createdAt).toLocaleDateString("en-IQ")),1)])]}),_:1}),s(l,{cols:"12",md:"6",class:"text-center",style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},{default:e(()=>{var i,x;return[a("div",W,[a("div",null,[t[1]||(t[1]=a("p",{class:"mb-0",style:{"font-size":"12px",color:"rgba(0,0,0,.7)"}},"Ø±Ù…Ø² ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",-1)),(i=v.value)!=null&&i.qr?(f(),w("img",{key:0,style:{"inline-size":"80px","block-size":"80px","object-fit":"contain"},src:`https://api.mulhimiq.com${v.value.qr}`,alt:"Ø±Ù…Ø² Ø­Ø¶ÙˆØ± Ø§Ù„Ø·Ù„Ø§Ø¨"},null,8,X)):S("",!0)])]),(x=v.value)!=null&&x.qr?(f(),y(B,{key:0,size:"small",variant:"tonal",color:"primary",onClick:R},{default:e(()=>[s(m,{start:"",size:"18"},{default:e(()=>t[2]||(t[2]=[r("mdi-printer")])),_:1}),t[3]||(t[3]=r(" Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø±Ù…Ø² "))]),_:1})):S("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(k,{class:"mb-6",style:{"justify-content":"center"}},{default:e(()=>[s(l,{cols:"12"},{default:e(()=>t[4]||(t[4]=[a("h2",{class:"text-h5 mb-4"},"Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª ÙˆØ§Ù„ÙÙˆØ§ØªÙŠØ±",-1)])),_:1}),s(l,{cols:"12",md:"4"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"36",color:"primary",class:"mb-2"},{default:e(()=>t[5]||(t[5]=[r("mdi-cash")])),_:1}),t[6]||(t[6]=a("div",{class:"text-body-2 text-medium-emphasis mb-1"},"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†",-1)),a("div",Z,n(g(c.value.totalDeposit)),1)]),_:1})]),_:1}),s(l,{cols:"12",md:"4"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"36",color:"success",class:"mb-2"},{default:e(()=>t[7]||(t[7]=[r("mdi-cash-check")])),_:1}),t[8]||(t[8]=a("div",{class:"text-body-2 text-medium-emphasis mb-1"},"Ø§Ù„Ù…Ø³ØªÙ„Ù… Ù…Ù† Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†",-1)),a("div",tt,n(g(c.value.receivedDeposit)),1)]),_:1})]),_:1}),s(l,{cols:"12",md:"4"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"36",color:"warning",class:"mb-2"},{default:e(()=>t[9]||(t[9]=[r("mdi-cash-remove")])),_:1}),t[10]||(t[10]=a("div",{class:"text-body-2 text-medium-emphasis mb-1"},"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù…Ù† Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†",-1)),a("div",et,n(g(c.value.remainingDeposit)),1)]),_:1})]),_:1}),s(l,{cols:"12",md:"4"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"36",color:"primary",class:"mb-2"},{default:e(()=>t[11]||(t[11]=[r("mdi-receipt")])),_:1}),t[12]||(t[12]=a("div",{class:"text-body-2 text-medium-emphasis mb-1"},"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ­Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø§Ø¨",-1)),a("div",st,n(g(c.value.studentTotalDue)),1)]),_:1})]),_:1}),s(l,{cols:"12",md:"4"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"36",color:"success",class:"mb-2"},{default:e(()=>t[13]||(t[13]=[r("mdi-receipt-text-check")])),_:1}),t[14]||(t[14]=a("div",{class:"text-body-2 text-medium-emphasis mb-1"},"Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ù…Ù† Ø§Ù„Ø·Ù„Ø§Ø¨",-1)),a("div",at,n(g(c.value.studentAmountPaid)),1)]),_:1})]),_:1}),s(l,{cols:"12",md:"4"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"36",color:"warning",class:"mb-2"},{default:e(()=>t[15]||(t[15]=[r("mdi-receipt-text-remove")])),_:1}),t[16]||(t[16]=a("div",{class:"text-body-2 text-medium-emphasis mb-1"},"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø§Ø¨",-1)),a("div",ot,n(g(c.value.studentAmountRemaining)),1)]),_:1})]),_:1}),s(l,{cols:"12"},{default:e(()=>t[17]||(t[17]=[a("h2",{class:"text-h5 mb-4"},"Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙƒ",-1)])),_:1}),D.value?(f(),y(l,{key:0,cols:"12"},{default:e(()=>[a("div",it,[s(T,{indeterminate:"",color:"primary",size:"48"})])]),_:1})):(f(),w(j,{key:1},[s(l,{cols:"12",sm:"6",md:"2"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"48",color:"primary",class:"mb-2"},{default:e(()=>t[18]||(t[18]=[r("mdi-account-group")])),_:1}),a("h3",lt,n(c.value.totalStudents),1),t[19]||(t[19]=a("p",{class:"text-body-2 text-medium-emphasis"},"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨",-1))]),_:1})]),_:1}),s(l,{cols:"12",sm:"6",md:"2"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"48",color:"success",class:"mb-2"},{default:e(()=>t[20]||(t[20]=[r("mdi-book-open")])),_:1}),a("h3",nt,n(c.value.totalCourses),1),t[21]||(t[21]=a("p",{class:"text-body-2 text-medium-emphasis"},"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙˆØ±Ø§Øª",-1))]),_:1})]),_:1}),s(l,{cols:"12",sm:"6",md:"2"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"48",color:"info",class:"mb-2"},{default:e(()=>t[22]||(t[22]=[r("mdi-account-check")])),_:1}),a("h3",rt,n(c.value.activeStudents),1),t[23]||(t[23]=a("p",{class:"text-body-2 text-medium-emphasis"},"Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù†Ø´Ø·ÙˆÙ†",-1))]),_:1})]),_:1}),s(l,{cols:"12",sm:"6",md:"2"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"48",color:"warning",class:"mb-2"},{default:e(()=>t[24]||(t[24]=[r("mdi-book-check")])),_:1}),a("h3",dt,n(c.value.activeCourses),1),t[25]||(t[25]=a("p",{class:"text-body-2 text-medium-emphasis"},"Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©",-1))]),_:1})]),_:1}),s(l,{cols:"12",sm:"6",md:"2"},{default:e(()=>[s(u,{class:"pa-4 text-center",elevation:"2"},{default:e(()=>[s(m,{size:"48",color:"secondary",class:"mb-2"},{default:e(()=>t[26]||(t[26]=[r("mdi-calendar-clock")])),_:1}),a("h3",mt,n(c.value.sessionsToday),1),t[27]||(t[27]=a("p",{class:"text-body-2 text-medium-emphasis"},"Ø­ØµØµ Ø§Ù„ÙŠÙˆÙ…",-1))]),_:1})]),_:1})],64))]),_:1}),s(k,{class:"mb-6"},{default:e(()=>[s(l,{cols:"12"},{default:e(()=>t[28]||(t[28]=[a("h2",{class:"text-h5 mb-4"},"Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ø§Ù„ÙŠÙˆÙ…",-1)])),_:1}),N.value?(f(),y(l,{key:0,cols:"12"},{default:e(()=>[a("div",ut,[s(T,{indeterminate:"",color:"primary",size:"32"})])]),_:1})):z.value.length?(f(!0),w(j,{key:2},U(z.value,i=>(f(),y(l,{key:i.sessionId,cols:"12",sm:"6",md:"4"},{default:e(()=>[s(u,{elevation:"2",class:"pa-4"},{default:e(()=>[a("div",ct,[a("div",pt,n(i.courseName||"Ø¯ÙˆØ±Ø©"),1),s(M,{color:i.state==="confirmed"?"success":i.state==="pending"?"warning":"default",size:"small"},{default:e(()=>[r(n(P(i.state)),1)]),_:2},1032,["color"])]),a("div",ft,n(i.title),1),a("div",vt,[s(m,{size:"18",class:"me-1"},{default:e(()=>t[30]||(t[30]=[r("mdi-clock-outline")])),_:1}),r(" "+n(i.startTime)+" - "+n(i.endTime),1)])]),_:2},1024)]),_:2},1024))),128)):(f(),y(l,{key:1,cols:"12"},{default:e(()=>[s(F,{type:"info",variant:"tonal",border:"start","border-color":"info"},{default:e(()=>t[29]||(t[29]=[r(" Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ù‚Ø§Ø¯Ù…Ø© Ø§Ù„ÙŠÙˆÙ…. ")])),_:1})]),_:1}))]),_:1})]),_:1})]))}},At=$(xt,[["__scopeId","data-v-bd48bfb8"]]);export{At as default};
