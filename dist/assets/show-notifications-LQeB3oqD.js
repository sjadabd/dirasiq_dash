import{_ as P}from"./BaseAlert-wMiE8tvl.js";import{_ as z}from"./ConfirmDangerDialog-BF62C-QL.js";import{_ as H}from"./SmartTable-BNEhEptK.js";import{_ as J}from"./AppBreadcrumbs-5R_D72iC.js";import y from"./teacher_api-DyrQANjO.js";import{n as E}from"./number-DRUmGIrN.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as w,a as C,c as B,b as Y}from"./VCard-CTAW927Q.js";import{V as G}from"./VDialog-DdZwyjMa.js";import{c as K,b as s,f as _,n as D,e as n,o as h,d as T,p as k,v as I,s as v,V as N,t as Q,b1 as F}from"./index-N2EhsRQt.js";import{V as x}from"./VDivider-D-Cf14qE.js";import{V as L,a as u}from"./VRow--YcB0Yd0.js";import{V as g}from"./VSelect-Di_TKuth.js";import{V as X}from"./VChip-v8q_B89j.js";import{V as Z}from"./VCardText-Q2eeque7.js";import{V as $}from"./VTextarea-7j_uKbNM.js";import{V as M}from"./VFileInput-DjlBjPG1.js";import"./VDataTable-CWyK32cU.js";import"./VTable-uKW7adu2.js";import"./filter-0X3vSYrS.js";import"./VTooltip-qYS1AgXw.js";import"./axios-CK0PAUQZ.js";import"./VAvatar-M6cRQjPV.js";import"./VImg-DOYF3Gzb.js";import"./VList-BwysrA6o.js";const ee={data(){return{keyName:"teacher-notifications",results:JSON.parse(localStorage.getItem("user")),breadcrumbItems:[{title:"الرئيسية",disabled:!1,to:"/teacher/index"},{title:"الإشعارات",disabled:!0}],loading:!1,progress:0,table:{totalItems:0,Data:[],actions:["حذف"],loading:!1,headers:[{title:"#",type:"strong",sortable:!1,key:"num"},{title:"العنوان",type:"strong",sortable:!0,key:"title"},{title:"الرسالة",type:"strong",sortable:!1,key:"message"},{title:"النوع",type:"strong",sortable:!0,key:"type_label"},{title:"اسم المرسل",type:"strong",sortable:!0,key:"sender_name"},{title:"المستلمون",type:"strong",sortable:!1,key:"recipients_label"},{title:"أُرسل في",type:"strong",sortable:!0,key:"sent_at_label"},{title:"إجراءات",type:"strong",sortable:!1,key:"actions"}],tableSettings:{options:{page:1,limit:10,search:null,q:null,type:null,subType:null,courseId:null}}},subTypeItems:[{text:"الكل",value:null},{text:"واجب بيتي",value:"homework"},{text:"رسالة",value:"message"},{text:"تقرير",value:"report"},{text:"تبليغ",value:"notice"},{text:"أقساط",value:"installments"},{text:"حضور",value:"attendance"},{text:"ملخص درس اليومي",value:"daily_summary"},{text:"أعياد ميلاد",value:"birthday"},{text:"امتحان يومي",value:"daily_exam"}],courseItems:[],subjectItems:[],subjectsLoading:!1,coursesLoading:!1,alert:{open:!1,message:null,type:"success"},deleteDialog:{open:!1,data:null,title:"تأكيد الحذف",confirmButtonText:"حذف",messages:["سيتم حذف هذا الإشعار.","لا يمكن التراجع عن هذه العملية."]},createDialog:{open:!1,loading:!1,form:{type:null,subType:null,title:"",message:"",courseId:null,subjectId:null,link:null,recipients:{mode:"specific_students",studentIdsText:"",selectedStudentIds:[],courseIdForStudents:null,sessionIdForStudents:null},attachments:{pdfBase64:null,imagesBase64:[]},priority:"medium"}},priorityItems:[{text:"منخفض",value:"low"},{text:"متوسط",value:"medium"},{text:"عالي",value:"high"}],recipientModeItems:[{text:"طلاب محددون",value:"specific_students"},{text:"طلاب الدورة",value:"students_of_course"},{text:"طلاب الجلسة",value:"students_of_session"},{text:"كل طلابي",value:"all_students_of_teacher"}],sessionItems:[],sessionsLoading:!1,studentsOptions:[],studentsLoading:!1}},created(){const l=JSON.parse(localStorage.getItem(this.keyName));this.table.tableSettings=l||this.table.tableSettings,this.loadCourseNames(),this.loadSessionNames(),this.loadSubjects()},methods:{numberWithComma:E,reload(){localStorage.removeItem(this.keyName),this.table.tableSettings.options={page:1,limit:10,q:null,type:null,courseId:null},this.getDataAxios()},updateTableOptions(l){this.table.tableSettings.options={...this.table.tableSettings.options,...l,q:l.q?l.q:null},this.getDataAxios()},async getDataAxios(){var t,r,d;this.progress=0,this.loading=!0;const l=setInterval(()=>{this.progress<90&&(this.progress+=10)},100);try{localStorage.setItem(this.keyName,JSON.stringify(this.table.tableSettings));const e=this.table.tableSettings.options,a=await y.getNotifications({page:e.page,limit:e.limit,q:e.search??"",type:e.type??"",subType:e.subType??"",courseId:e.courseId??""}),m=(a==null?void 0:a.data)||{};let p=m.data||[];e.subType&&(p=p.filter(i=>{var c;return(((c=i==null?void 0:i.data)==null?void 0:c.subType)||(i==null?void 0:i.subType))===e.subType}));const V=i=>({course_update:"تحديث دورة",session_update:"تحديث جلسة",teacher_message:"رسالة معلم",booking_update:"تحديث حجز",new_booking:"حجز جديد",system:"نظام"})[i]||i||"-",b=i=>({high:"عالي",medium:"متوسط",low:"منخفض"})[i]||i||"-",o=i=>({sent:"مُرسل",pending:"قيد الإرسال",failed:"فشل"})[i]||i||"-",q=i=>({system:"النظام",teacher:"معلم",student:"طالب",admin:"مسؤول"})[i]||i||"-",R=(i,c)=>{if(i&&typeof i=="object"){const U=i.mode||i.type||"-",O=i.studentCount??(Array.isArray(i.studentIds)?i.studentIds.length:void 0),j={all_students_of_teacher:"كل طلابي",students_of_course:"طلاب الدورة",students_of_session:"طلاب الجلسة",specific_students:"طلاب محددون",specific_teachers:"معلمون محددون",course_teachers:"معلمي الدورة",all:"الكل"}[U]||String(U);return O!==void 0?`${j} (${O})`:j}const f=c==null?void 0:c.recipient_type,S=Array.isArray(c==null?void 0:c.recipient_ids)?c.recipient_ids.length:void 0,A={all_students_of_teacher:"كل طلابي",students_of_course:"طلاب الدورة",students_of_session:"طلاب الجلسة",specific_students:"طلاب محددون",specific_teachers:"معلمون محددون",course_teachers:"معلمي الدورة",all:"الكل"}[f]||(f?String(f):"-");return S!==void 0?`${A} (${S})`:A};this.table.Data=p.map((i,c)=>{const f=i.data||{},S=i.sender||f.sender||{},A=f!=null&&f.recipients?f.recipients:i.recipients||null;return{id:i.id,num:(e.page-1)*e.limit+c+1,title:i.title||"-",message:i.message||"-",type_label:V(i.type),priority_label:b(i.priority),status_label:o(i.status),sender_name:S.name||"-",sender_type_label:q(S.type),recipients_label:R(A,i),is_read_label:i.is_read?"مقروء":"غير مقروء",occurred_on:f.occurredOn||"-",scheduled_at:i.scheduled_at||"-",sent_at_label:this.formatDateTimeArabic(i.sent_at),read_at:i.read_at||"-",user_read_at:i.user_read_at||"-",created_at:i.created_at||i.createdAt||"-",updated_at:i.updated_at||i.updatedAt||"-"}}),this.table.totalItems=((t=m.pagination)==null?void 0:t.total)||0}catch(e){this.showAlert("error",((d=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:d.message)||"حدث خطأ أثناء جلب الإشعارات")}finally{clearInterval(l),this.progress=100,setTimeout(()=>{this.loading=!1,this.progress=0},500)}},async loadSubjects(){var l;try{this.subjectsLoading=!0;const t=await y.getAllSubjects(),r=((l=t==null?void 0:t.data)==null?void 0:l.data)||[];this.subjectItems=r.map(d=>({text:d.name,value:d.id}))}catch{this.showAlert("error","تعذر جلب المواد")}finally{this.subjectsLoading=!1}},async loadCourseNames(){var l;try{this.coursesLoading=!0;const t=await y.getCourseNames(),r=((l=t==null?void 0:t.data)==null?void 0:l.data)||[];this.courseItems=r.map(d=>({text:d.name,value:d.id}))}catch{this.showAlert("error","تعذر جلب أسماء الدورات")}finally{this.coursesLoading=!1}},async loadSessionNames(){var l;try{this.sessionsLoading=!0;const t=await y.getSessionNames(),r=((l=t==null?void 0:t.data)==null?void 0:l.data)||[];this.sessionItems=r.map(d=>({text:d.title||d.name,value:d.id}))}catch{this.showAlert("error","تعذر جلب أسماء الجلسات")}finally{this.sessionsLoading=!1}},async onRecipientsModeChange(){const l=this.createDialog.form.recipients.mode;this.createDialog.form.recipients.selectedStudentIds=[],this.studentsOptions=[],l==="all_students_of_teacher"?(await this.loadAllStudents(),this.createDialog.form.recipients.selectedStudentIds=this.studentsOptions.map(t=>t.id)):l==="specific_students"&&await this.loadAllStudents()},async loadAllStudents(){var l;try{this.studentsLoading=!0;const t=await y.getTeacherStudents(),r=((l=t==null?void 0:t.data)==null?void 0:l.data)||[];this.studentsOptions=r.map(d=>({id:String(d.id||d.student_id),name:d.name||d.student_name}))}catch{this.showAlert("error","تعذر جلب طلاب المعلم")}finally{this.studentsLoading=!1}},async loadStudentsByCourse(l){var t;try{if(!l){this.studentsOptions=[];return}this.studentsLoading=!0;const r=await y.getStudentsByCourse(l),d=((t=r==null?void 0:r.data)==null?void 0:t.data)||[];this.studentsOptions=d.map(e=>({id:String(e.id||e.student_id),name:e.name||e.student_name}))}catch{this.showAlert("error","تعذر جلب طلاب الدورة")}finally{this.studentsLoading=!1}},async loadStudentsBySession(l){var t;try{if(!l){this.studentsOptions=[];return}this.studentsLoading=!0;const r=await y.getStudentsBySession(l),d=((t=r==null?void 0:r.data)==null?void 0:t.data)||[];this.studentsOptions=d.map(e=>({id:String(e.id||e.student_id),name:e.name||e.student_name}))}catch{this.showAlert("error","تعذر جلب طلاب الجلسة")}finally{this.studentsLoading=!1}},formatDateTimeArabic(l){if(!l)return"-";const t=new Date(l);if(isNaN(t.getTime()))return String(l);const r=t.getFullYear(),d=String(t.getMonth()+1).padStart(2,"0"),e=String(t.getDate()).padStart(2,"0");let a=t.getHours();const m=String(t.getMinutes()).padStart(2,"0"),p=String(t.getSeconds()).padStart(2,"0"),b=a<12?"صباحاً":"مساءً";a=(a+11)%12+1;const o=String(a).padStart(2,"0");return`${r}-${d}-${e} ${o}:${m}:${p} ${b}`},openCreateDialog(){this.createDialog.open=!0},async onPdfSelected(l){var r;const t=Array.isArray(l)?l[0]:l!=null&&l.target?(r=l.target.files)==null?void 0:r[0]:l==null?void 0:l[0];if(!t){this.createDialog.form.attachments.pdfBase64=null;return}this.createDialog.form.attachments.pdfBase64=await this.toBase64(t)},async onImagesSelected(l){const t=Array.isArray(l)?l:l!=null&&l.target?Array.from(l.target.files||[]):l||[],r=[];for(const d of t){const e=await this.toBase64(d);r.push(e)}this.createDialog.form.attachments.imagesBase64=r},toBase64(l){return new Promise((t,r)=>{const d=new FileReader;d.onload=()=>t(String(d.result)),d.onerror=r,d.readAsDataURL(l)})},async submitCreateNotification(){var l,t,r,d,e;try{this.createDialog.loading=!0;const a=this.createDialog.form;if(!a.title||!a.message){this.showAlert("error","الحقول title, message مطلوبة");return}if(!a.recipients||!a.recipients.mode){this.showAlert("error","recipients.mode مطلوب");return}let m={mode:a.recipients.mode};if(a.recipients.mode==="specific_students"){const o=(a.recipients.selectedStudentIds||[]).map(String);if(!o.length){this.showAlert("error","الرجاء اختيار طلاب واحد على الأقل");return}m={mode:"specific_students",studentIds:o}}const p={};(l=a.attachments)!=null&&l.pdfBase64&&(p.pdfBase64=a.attachments.pdfBase64),(((t=a.attachments)==null?void 0:t.imagesBase64)||[]).length&&(p.imagesBase64=a.attachments.imagesBase64);const V={type:"teacher_message",subType:a.subType||null,title:a.title,message:a.message,courseId:a.courseId||null,subjectId:a.subjectId||null,link:a.link||null,recipients:m,attachments:p,priority:a.priority||"medium"},b=await y.createNotification(V);this.showAlert("success",((r=b==null?void 0:b.data)==null?void 0:r.message)||"تم إرسال الإشعار"),this.createDialog.open=!1,this.createDialog.loading=!1,this.createDialog.form.recipients.studentIdsText="",await this.getDataAxios()}catch(a){this.showAlert("error",((e=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:e.message)||"فشل إرسال الإشعار")}finally{this.createDialog.loading=!1}},async handleDeleteNotification(l){if(!(l!=null&&l.id)){this.showAlert("error","عنصر غير صالح");return}this.deleteDialog.data=l,this.deleteDialog.open=!0},async handleDeleteConfirm(){var l,t,r,d,e;try{const a=(t=(l=this.deleteDialog)==null?void 0:l.data)==null?void 0:t.id;if(!a){this.showAlert("error","عنصر غير صالح");return}const m=await y.deleteNotification(a);this.showAlert("success",((r=m==null?void 0:m.data)==null?void 0:r.message)||"تم حذف الإشعار"),this.deleteDialog.open=!1,await this.getDataAxios()}catch(a){this.showAlert("error",((e=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:e.message)||"فشل حذف الإشعار")}},showAlert(l,t){Object.assign(this.alert,{type:l,message:t,open:!0})}}};function te(l,t,r,d,e,a){const m=J,p=H,V=z,b=P;return h(),K("div",null,[s(m,{items:e.breadcrumbItems},null,8,["items"]),s(w,{class:"my-4 operations-card",elevation:"3",rounded:"lg"},{default:n(()=>[s(C,{class:"d-flex align-center py-4 px-6"},{default:n(()=>[s(k,{icon:"mdi-cog-outline",color:"primary",class:"me-2",size:"24"}),t[21]||(t[21]=T("h3",{class:"text-h5 font-weight-bold"},"العمليات",-1))]),_:1}),s(x),s(B,null,{default:n(()=>[s(L,{class:"align-center justify-start pa-2"},{default:n(()=>[s(I,{color:"primary",class:"ma-2","prepend-icon":"ri-add-line",rounded:"pill",elevation:"2",size:"default",onClick:a.openCreateDialog},{default:n(()=>t[22]||(t[22]=[v(" إشعار جديد ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),s(w,{class:"my-4",elevation:"3",rounded:"lg"},{default:n(()=>[s(C,{class:"d-flex align-center py-4 px-6"},{default:n(()=>[s(k,{icon:"ri-notification-3-line",color:"primary",class:"me-2",size:"24"}),t[23]||(t[23]=T("h3",{class:"text-h5 font-weight-bold"},"إشعارات المعلم",-1)),s(N)]),_:1}),s(x),s(B,null,{default:n(()=>[s(L,{class:"py-3"},{default:n(()=>[s(u,{cols:"12",md:"4"},{default:n(()=>[s(g,{modelValue:e.table.tableSettings.options.subType,"onUpdate:modelValue":[t[0]||(t[0]=o=>e.table.tableSettings.options.subType=o),a.getDataAxios],items:e.subTypeItems,"item-title":"text","item-value":"value",label:"نوع الإشعار",variant:"outlined",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(u,{cols:"12",md:"4"},{default:n(()=>[s(g,{modelValue:e.table.tableSettings.options.courseId,"onUpdate:modelValue":[t[1]||(t[1]=o=>e.table.tableSettings.options.courseId=o),a.getDataAxios],items:e.courseItems,"item-title":"text","item-value":"value",label:"الدورة",variant:"outlined",loading:e.coursesLoading,disabled:e.coursesLoading,clearable:""},null,8,["modelValue","items","loading","disabled","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),s(w,{class:"my-4",elevation:"3",rounded:"lg"},{default:n(()=>[s(C,{class:"py-4 px-6"},{default:n(()=>[s(L,{class:"align-center"},{default:n(()=>[s(u,{cols:"auto"},{default:n(()=>[s(I,{color:"primary",onClick:t[2]||(t[2]=o=>a.reload()),icon:"ri-refresh-line",variant:"tonal",rounded:"circle",size:"small",class:"rotate-on-hover"})]),_:1}),s(u,null,{default:n(()=>t[24]||(t[24]=[T("h3",{class:"text-h5 font-weight-bold text-center"},"قائمة الإشعارات",-1)])),_:1}),s(u,{cols:"auto"},{default:n(()=>[s(X,{color:"primary",variant:"elevated",class:"font-weight-medium"},{default:n(()=>[v(Q(Number(e.table.totalItems).toLocaleString())+" عدد السجلات ",1)]),_:1})]),_:1})]),_:1})]),_:1}),s(x),s(B,null,{default:n(()=>[s(p,{headers:e.table.headers,items:e.table.Data,actions:e.table.actions,loading:e.table.loading,totalItems:e.table.totalItems,tableOptions:e.table.tableSettings.options,onUpdateTableOptions:a.updateTableOptions,onDeleteItem:a.handleDeleteNotification},null,8,["headers","items","actions","loading","totalItems","tableOptions","onUpdateTableOptions","onDeleteItem"])]),_:1})]),_:1}),s(G,{modelValue:e.createDialog.open,"onUpdate:modelValue":t[17]||(t[17]=o=>e.createDialog.open=o),"max-width":"1000"},{default:n(()=>[s(w,null,{default:n(()=>[s(C,{class:"d-flex align-center"},{default:n(()=>[s(k,{icon:"ri-notification-3-line",class:"me-2"}),t[26]||(t[26]=T("span",{class:"text-h6"},"إرسال إشعار جديد",-1)),s(N),s(I,{icon:"",variant:"text",onClick:t[3]||(t[3]=o=>e.createDialog.open=!1)},{default:n(()=>[s(k,null,{default:n(()=>t[25]||(t[25]=[v("ri-close-line")])),_:1})]),_:1})]),_:1}),s(x),s(Z,null,{default:n(()=>[s(L,null,{default:n(()=>[s(u,{cols:"12",md:"4"},{default:n(()=>[s(g,{modelValue:e.createDialog.form.subType,"onUpdate:modelValue":t[4]||(t[4]=o=>e.createDialog.form.subType=o),items:e.subTypeItems.filter(o=>o.value),"item-title":"text","item-value":"value",label:"نوع الإشعار",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),s(u,{cols:"12",md:"4"},{default:n(()=>[s(F,{modelValue:e.createDialog.form.title,"onUpdate:modelValue":t[5]||(t[5]=o=>e.createDialog.form.title=o),label:"عنوان الإشعار",variant:"outlined"},null,8,["modelValue"])]),_:1}),s(u,{cols:"12",md:"4"},{default:n(()=>[s(F,{modelValue:e.createDialog.form.link,"onUpdate:modelValue":t[6]||(t[6]=o=>e.createDialog.form.link=o),label:"رابط (اختياري)",variant:"outlined"},null,8,["modelValue"])]),_:1}),s(u,{cols:"12"},{default:n(()=>[s($,{modelValue:e.createDialog.form.message,"onUpdate:modelValue":t[7]||(t[7]=o=>e.createDialog.form.message=o),label:"نص الإشعار",variant:"outlined","auto-grow":""},null,8,["modelValue"])]),_:1}),s(u,{cols:"12",md:"4"},{default:n(()=>[s(g,{modelValue:e.createDialog.form.courseId,"onUpdate:modelValue":t[8]||(t[8]=o=>e.createDialog.form.courseId=o),items:e.courseItems,"item-title":"text","item-value":"value",label:"الدورة (اختياري)",variant:"outlined",loading:e.coursesLoading,disabled:e.coursesLoading},null,8,["modelValue","items","loading","disabled"])]),_:1}),s(u,{cols:"12",md:"4"},{default:n(()=>[s(g,{modelValue:e.createDialog.form.subjectId,"onUpdate:modelValue":t[9]||(t[9]=o=>e.createDialog.form.subjectId=o),items:e.subjectItems,"item-title":"text","item-value":"value",label:"المادة (اختياري)",variant:"outlined",loading:e.subjectsLoading,disabled:e.subjectsLoading,clearable:""},null,8,["modelValue","items","loading","disabled"])]),_:1}),s(u,{cols:"12",md:"4"},{default:n(()=>[s(g,{modelValue:e.createDialog.form.recipients.mode,"onUpdate:modelValue":[t[10]||(t[10]=o=>e.createDialog.form.recipients.mode=o),a.onRecipientsModeChange],items:e.recipientModeItems,"item-title":"text","item-value":"value",label:"نطاق المستلمين",variant:"outlined"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),e.createDialog.form.recipients.mode==="specific_students"?(h(),_(u,{key:0,cols:"12",md:"8"},{default:n(()=>[s(g,{modelValue:e.createDialog.form.recipients.selectedStudentIds,"onUpdate:modelValue":t[11]||(t[11]=o=>e.createDialog.form.recipients.selectedStudentIds=o),items:e.studentsOptions,"item-title":"name","item-value":"id",label:"اختر الطلاب",chips:"",multiple:"",clearable:"",loading:e.studentsLoading,variant:"outlined"},null,8,["modelValue","items","loading"])]),_:1})):D("",!0),e.createDialog.form.recipients.mode==="students_of_course"?(h(),_(u,{key:1,cols:"12",md:"4"},{default:n(()=>[s(g,{modelValue:e.createDialog.form.recipients.courseIdForStudents,"onUpdate:modelValue":[t[12]||(t[12]=o=>e.createDialog.form.recipients.courseIdForStudents=o),a.loadStudentsByCourse],items:e.courseItems,"item-title":"text","item-value":"value",label:"اختر الدورة",variant:"outlined",loading:e.coursesLoading,disabled:e.coursesLoading},null,8,["modelValue","items","loading","disabled","onUpdate:modelValue"])]),_:1})):D("",!0),e.createDialog.form.recipients.mode==="students_of_course"?(h(),_(u,{key:2,cols:"12",md:"8"},{default:n(()=>[s(g,{modelValue:e.createDialog.form.recipients.selectedStudentIds,"onUpdate:modelValue":t[13]||(t[13]=o=>e.createDialog.form.recipients.selectedStudentIds=o),items:e.studentsOptions,"item-title":"name","item-value":"id",label:"طلاب الدورة",chips:"",multiple:"",clearable:"",loading:e.studentsLoading,variant:"outlined"},null,8,["modelValue","items","loading"])]),_:1})):D("",!0),e.createDialog.form.recipients.mode==="students_of_session"?(h(),_(u,{key:3,cols:"12",md:"4"},{default:n(()=>[s(g,{modelValue:e.createDialog.form.recipients.sessionIdForStudents,"onUpdate:modelValue":[t[14]||(t[14]=o=>e.createDialog.form.recipients.sessionIdForStudents=o),a.loadStudentsBySession],items:e.sessionItems,"item-title":"text","item-value":"value",label:"اختر الجلسة",variant:"outlined",loading:e.sessionsLoading,disabled:e.sessionsLoading},null,8,["modelValue","items","loading","disabled","onUpdate:modelValue"])]),_:1})):D("",!0),e.createDialog.form.recipients.mode==="students_of_session"?(h(),_(u,{key:4,cols:"12",md:"8"},{default:n(()=>[s(g,{modelValue:e.createDialog.form.recipients.selectedStudentIds,"onUpdate:modelValue":t[15]||(t[15]=o=>e.createDialog.form.recipients.selectedStudentIds=o),items:e.studentsOptions,"item-title":"name","item-value":"id",label:"طلاب الجلسة",chips:"",multiple:"",clearable:"",loading:e.studentsLoading,variant:"outlined"},null,8,["modelValue","items","loading"])]),_:1})):D("",!0),s(u,{cols:"12",md:"4"},{default:n(()=>[s(M,{label:"مرفق PDF (اختياري)",accept:"application/pdf","prepend-icon":"ri-file-pdf-2-line",onChange:a.onPdfSelected},null,8,["onChange"])]),_:1}),s(u,{cols:"12",md:"4"},{default:n(()=>[s(M,{label:"صور (اختياري)",accept:"image/*",multiple:"","prepend-icon":"ri-image-2-line",onChange:a.onImagesSelected},null,8,["onChange"])]),_:1})]),_:1})]),_:1}),s(x),s(Y,null,{default:n(()=>[s(N),s(I,{variant:"text",onClick:t[16]||(t[16]=o=>e.createDialog.open=!1)},{default:n(()=>t[27]||(t[27]=[v("إلغاء")])),_:1}),s(I,{color:"primary",loading:e.createDialog.loading,onClick:a.submitCreateNotification},{default:n(()=>t[28]||(t[28]=[v("إرسال")])),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e.deleteDialog.open?(h(),_(V,{key:0,modelValue:e.deleteDialog.open,"onUpdate:modelValue":t[18]||(t[18]=o=>e.deleteDialog.open=o),messages:e.deleteDialog.messages,title:e.deleteDialog.title,confirmButtonText:e.deleteDialog.confirmButtonText,onConfirm:a.handleDeleteConfirm},null,8,["modelValue","messages","title","confirmButtonText","onConfirm"])):D("",!0),e.alert.open?(h(),_(b,{key:1,modelValue:e.alert.open,"onUpdate:modelValue":t[19]||(t[19]=o=>e.alert.open=o),type:e.alert.type,message:e.alert.message,closable:!0,"close-text":"موافق",onClose:t[20]||(t[20]=o=>e.alert.open=!1)},null,8,["modelValue","type","message"])):D("",!0)])}const we=W(ee,[["render",te]]);export{we as default};
