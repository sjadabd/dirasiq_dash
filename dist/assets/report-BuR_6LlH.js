import{_}from"./AppBreadcrumbs-CGDMHBEQ.js";import{T as g}from"./teacher_api-B0aW0cjW.js";import{n as h}from"./number-DRUmGIrN.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as i,b as y,a as b}from"./VCard-q0Xiefi9.js";import{V as u,a as r}from"./VRow-_6XExfSs.js";import{c as V,b as e,d as o,e as s,a as A,o as C,k as c,t as n,A as Y,q as k}from"./index-B-ugD3CV.js";import{V as w}from"./VDivider-0jTJqE-a.js";import{V as I}from"./VSelect-BF-InOJ4.js";import"./axios-D6DdSkOE.js";import"./VAvatar-BSxHYKKi.js";import"./VImg-CPt2aJgH.js";import"./VCardText-Dz05REAW.js";import"./VList-Dy5AF_mx.js";import"./VChip-CqnLjyZp.js";const P={data(){return{keyName:"reservation-payments-report",results:JSON.parse(localStorage.getItem("user")),breadcrumbItems:[{title:"الرئيسية",disabled:!1,to:"/teacher/index"},{title:"تقرير فواتير العربون",disabled:!0}],loading:!1,progress:0,studyYears:this.buildStudyYears(),studyYear:JSON.parse(localStorage.getItem("studyYear"))||"",counts:{totalPaid:0,totalPending:0},totals:{totalAmount:0,totalPaidAmount:0,discountAmount:0,remainingAmount:0}}},mounted(){this.getDataAxios()},methods:{numberWithComma:h,buildStudyYears(){const d=new Date().getFullYear(),t=[];for(let a=d-1;a<=d+1;a++)t.push({label:`${a}-${a+1}`,value:`${a}-${a+1}`});return t},async getDataAxios(){if(!this.studyYear)return;this.progress=0,this.loading=!0;const d=setInterval(()=>{this.progress<90&&(this.progress+=10)},100);try{const{data:t}=await g.getReservationPaymentsReport(this.studyYear),a=(t==null?void 0:t.data)||{};this.counts=a.counts||this.counts,this.totals=a.totals||this.totals}catch(t){console.error(t)}finally{clearInterval(d),this.progress=100,setTimeout(()=>{this.loading=!1,this.progress=0},300)}}}},S={class:"text-h5 mt-1"},D={class:"text-h5 mt-1"},N={class:"text-h5 mt-1"},B={class:"text-h5 mt-1"},R={class:"d-flex align-center justify-space-between"},T={class:"text-h6 mt-1"},W={class:"d-flex align-center justify-space-between"},j={class:"text-h6 mt-1"},z={class:"mt-4 d-flex justify-end"};function J(d,t,a,L,l,m){const p=_,f=A("RouterLink");return C(),V("div",null,[e(p,{items:l.breadcrumbItems},null,8,["items"]),e(i,{class:"my-4 filter-card",elevation:"3",rounded:"lg"},{default:s(()=>[e(y,{class:"d-flex align-center py-4 px-6"},{default:s(()=>[e(c,{icon:"ri-filter-3-line",color:"primary",class:"me-2",size:"24"}),t[1]||(t[1]=o("h3",{class:"text-h5 font-weight-bold"},"تصفية",-1))]),_:1}),e(w),e(b,null,{default:s(()=>[e(u,{style:{"padding-block":"10px"}},{default:s(()=>[e(r,{cols:"12",md:"4"},{default:s(()=>[e(I,{modelValue:l.studyYear,"onUpdate:modelValue":[t[0]||(t[0]=v=>l.studyYear=v),m.getDataAxios],items:l.studyYears,"item-title":"label","item-value":"value",label:"السنة الدراسية",variant:"outlined"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{class:"my-4"},{default:s(()=>[e(r,{cols:"12",md:"3"},{default:s(()=>[e(i,{class:"pa-4",elevation:"3",rounded:"lg"},{default:s(()=>[t[2]||(t[2]=o("div",{class:"text-subtitle-2 text-medium-emphasis"},"إجمالي المبالغ",-1)),o("div",S,n(m.numberWithComma(l.totals.totalAmount))+" د.ع",1)]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:s(()=>[e(i,{class:"pa-4",elevation:"3",rounded:"lg"},{default:s(()=>[t[3]||(t[3]=o("div",{class:"text-subtitle-2 text-medium-emphasis"},"المدفوع",-1)),o("div",D,n(m.numberWithComma(l.totals.totalPaidAmount))+" د.ع",1)]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:s(()=>[e(i,{class:"pa-4",elevation:"3",rounded:"lg"},{default:s(()=>[t[4]||(t[4]=o("div",{class:"text-subtitle-2 text-medium-emphasis"},"الخصم",-1)),o("div",N,n(m.numberWithComma(l.totals.discountAmount))+" د.ع",1)]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:s(()=>[e(i,{class:"pa-4",elevation:"3",rounded:"lg"},{default:s(()=>[t[5]||(t[5]=o("div",{class:"text-subtitle-2 text-medium-emphasis"},"المتبقي",-1)),o("div",B,n(m.numberWithComma(l.totals.remainingAmount))+" د.ع",1)]),_:1})]),_:1})]),_:1}),e(u,{class:"my-2"},{default:s(()=>[e(r,{cols:"12",md:"6"},{default:s(()=>[e(i,{class:"pa-4",elevation:"2",rounded:"lg"},{default:s(()=>[o("div",R,[o("div",null,[t[6]||(t[6]=o("div",{class:"text-subtitle-2 text-medium-emphasis"},"عدد المدفوعة",-1)),o("div",T,n(l.counts.totalPaid),1)]),e(c,{icon:"ri-check-double-line",color:"success",size:"28"})])]),_:1})]),_:1}),e(r,{cols:"12",md:"6"},{default:s(()=>[e(i,{class:"pa-4",elevation:"2",rounded:"lg"},{default:s(()=>[o("div",W,[o("div",null,[t[7]||(t[7]=o("div",{class:"text-subtitle-2 text-medium-emphasis"},"عدد قيد الانتظار",-1)),o("div",j,n(l.counts.totalPending),1)]),e(c,{icon:"ri-time-line",color:"warning",size:"28"})])]),_:1})]),_:1})]),_:1}),o("div",z,[e(f,{to:{name:"teacher-payments-reservations-show-reservation-payments"}},{default:s(()=>[e(Y,{color:"primary","prepend-icon":"ri-list-check-2",variant:"elevated"},{default:s(()=>t[8]||(t[8]=[k("رجوع إلى القائمة")])),_:1})]),_:1})])])}const st=x(P,[["render",J]]);export{st as default};
