import{_ as y}from"./AppPricing-GsdQTxQg.js";import b from"./teacher_api-Bgok66l7.js";import{a as V,V as h}from"./VCard-D4uEzfmu.js";import{r as m,m as w,c as S,o as g,b as n,e as i,d as e,p as C,s as c,v as N,f as k,n as A,aZ as B,t as l,D as E}from"./index-CXn58W-A.js";import{V as T}from"./VCardText-BpiNX1gO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VRow-LCDPsJz5.js";import"./VChip-3e4YXY2a.js";import"./VAvatar-RzyGemFQ.js";import"./VImg-Cara8jvF.js";import"./VList-CSVmTKRH.js";import"./VDivider-BMfDbzm1.js";import"./VSnackbar-Dkiy1QcD.js";import"./axios-DwhOaX7i.js";const z={class:"pa-6 d-flex flex-column gap-4"},D={class:"d-flex align-center gap-2"},j={class:"d-flex flex-wrap gap-4"},F={class:"text-h5 font-weight-bold"},I={class:"text-h5 font-weight-bold"},L={class:"text-h5 font-weight-bold"},$={__name:"billing",setup(M){const s=m({currentStudents:0,maxStudents:0,remaining:0,canAdd:!1}),r=m(!1),d=m("");async function p(){var u,a,f,v,x;r.value=!0,d.value="";try{const t=await b.getRemainingStudents(),_=((u=t==null?void 0:t.data)==null?void 0:u.success)||(t==null?void 0:t.success),o=((a=t==null?void 0:t.data)==null?void 0:a.data)||(t==null?void 0:t.data)||t;if(!_||!o)throw new Error(((f=t==null?void 0:t.data)==null?void 0:f.message)||"تعذر جلب تقرير السعة");s.value={currentStudents:Number(o.currentStudents)||0,maxStudents:Number(o.maxStudents)||0,remaining:Number(o.remaining)||0,canAdd:!!o.canAdd}}catch(t){console.warn("Failed to fetch remaining students:",t),d.value=((x=(v=t==null?void 0:t.response)==null?void 0:v.data)==null?void 0:x.message)||(t==null?void 0:t.message)||"تعذر جلب تقرير السعة، يرجى المحاولة لاحقًا"}finally{r.value=!1}}return w(()=>{p()}),(u,a)=>(g(),S("div",z,[n(h,{elevation:"2"},{default:i(()=>[n(V,{class:"d-flex align-center justify-space-between"},{default:i(()=>[e("div",D,[n(C,{color:"primary"},{default:i(()=>a[0]||(a[0]=[c("mdi-account-group")])),_:1}),a[1]||(a[1]=e("span",null,"سعة اشتراك الطلاب",-1))]),n(N,{variant:"text",size:"small",loading:r.value,onClick:p},{default:i(()=>a[2]||(a[2]=[c(" تحديث ")])),_:1},8,["loading"])]),_:1}),n(T,null,{default:i(()=>[d.value?(g(),k(B,{key:0,type:"error",variant:"tonal",class:"mb-4",density:"comfortable"},{default:i(()=>[c(l(d.value),1)]),_:1})):A("",!0),e("div",j,[e("div",null,[a[3]||(a[3]=e("div",{class:"text-caption text-medium-emphasis"},"الطلاب الحاليون",-1)),e("div",F,l(s.value.currentStudents),1)]),e("div",null,[a[4]||(a[4]=e("div",{class:"text-caption text-medium-emphasis"},"الحد الأقصى في الباقة",-1)),e("div",I,l(s.value.maxStudents),1)]),e("div",null,[a[5]||(a[5]=e("div",{class:"text-caption text-medium-emphasis"},"المتبقّي",-1)),e("div",L,l(s.value.remaining),1)]),e("div",null,[a[6]||(a[6]=e("div",{class:"text-caption text-medium-emphasis"},"إمكانية إضافة طلاب جدد",-1)),e("div",{class:E(["text-h6 font-weight-bold",s.value.canAdd?"text-success":"text-error"])},l(s.value.canAdd?"يمكن إضافة طلاب جدد":"لا يمكن إضافة طلاب جدد"),3)])])]),_:1})]),_:1}),n(y,{title:"خطط اشتراك المعلّم"})]))}};export{$ as default};
