import{_ as w}from"./BaseAlert-DMDZYgBb.js";import{_ as k}from"./SmartTable-DRD1z7i0.js";import{_ as x}from"./AppBreadcrumbs-5PWjj0AR.js";import{a as v}from"./axios-CwDcW8lj.js";import{n as I}from"./number-DRUmGIrN.js";import{c as C,b as a,f as N,n as T,e as o,o as g,d as h,p as D,a_ as A,b6 as O,v as B,s as J,t as U}from"./index-DzRnBGoW.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as b,a as f,c as y}from"./VCard-DkKUq9Xw.js";import{V as _}from"./VDivider-DOU2dJa1.js";import{V as S,a as p}from"./VRow-1sXKMjVm.js";import{V as K}from"./VChip-BxDWJl9X.js";import"./VCardText-DxpVkpnf.js";import"./VDialog-B-d6xDxs.js";import"./VDataTable-DKHI-dYN.js";import"./VPagination-DPnje41R.js";import"./VSelect-DPU1_UF_.js";import"./VList-C_vO-TC7.js";import"./VAvatar-gDhFptrY.js";import"./VImg-DAcp9xse.js";import"./VTable-CGzAcL7O.js";import"./filter-BD0O1YfX.js";import"./VTooltip-CZZ_rwxI.js";const L={data(){return{keyName:"show-teachers",results:JSON.parse(localStorage.getItem("user")),breadcrumbItems:[{title:"الرئيسية",disabled:!1,to:"/admin/dashboard"},{title:"المعلمين",disabled:!0}],loading:!1,progress:0,table:{totalItems:0,Data:[],actions:[""],loading:!1,headers:[{title:"#",type:"strong",sortable:!1,key:"num"},{title:"الاسم",type:"link",sortable:!1,key:"name"},{title:"البريد الإلكتروني",type:"strong",sortable:!1,key:"email"},{title:"رقم الجوال",type:"strong",sortable:!1,key:"phone"},{title:"الحالة",type:"strong",sortable:!1,key:"status"},{title:"تاريخ الإنشاء",type:"strong",sortable:!1,key:"created_at"},{title:"العمليات",type:"strong",sortable:!1,key:"actions"}],tableSettings:{options:{page:1,limit:10,scroll:0,sortBy:"",search:null}}},alert:{open:!1,message:null,type:"success"}}},created(){const e=JSON.parse(localStorage.getItem(this.keyName));this.table.tableSettings=e||this.table.tableSettings,this.tempScrollTop=(e==null?void 0:e.scrollTop)||0},mounted(){window.addEventListener("scroll",this.handleScroll),this.getDataAxios()},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{numberWithComma:I,handleScroll(){const e=window.scrollY||window.pageYOffset,t=JSON.parse(localStorage.getItem(this.keyName))||{};t.scrollTop=e,localStorage.setItem(this.keyName,JSON.stringify(t))},reload(){localStorage.removeItem(this.keyName),this.table.tableSettings.options={page:1,limit:10,scroll:0,sortBy:"",search:null},this.getDataAxios()},updateTableOptions(e){this.table.tableSettings.options={...this.table.tableSettings.options,...e,search:e.search?e.search:null},this.getDataAxios()},handleClearSearch(){this.table.tableSettings.options.search=null,this.getDataAxios()},async getDataAxios(){var e,t,c,d,s;this.progress=0,this.loading=!0;try{localStorage.setItem(this.keyName,JSON.stringify(this.table.tableSettings));const l=this.table.tableSettings.options,n={page:l.page||1,limit:l.limit||10,search:l.search||""},i=await v.get("/super-admin/teachers",{params:n});if((e=i.data)!=null&&e.error)return this.showAlert("error",i.data.message||"حدث خطأ أثناء جلب البيانات");const m=((t=i.data)==null?void 0:t.data)||[],r=((c=i.data)==null?void 0:c.pagination)||{};this.table.Data=m.map((u,V)=>({...u,num:(n.page-1)*n.limit+(V+1),created_at:u.created_at?new Date(u.created_at).toLocaleDateString("ar-SA"):"-"})),this.table.totalItems=r.total||m.length||0}catch(l){this.showAlert("error",((s=(d=l==null?void 0:l.response)==null?void 0:d.data)==null?void 0:s.message)||"حدث خطأ أثناء جلب البيانات")}finally{this.loading=!1}},viewTeacher(e){e!=null&&e.id&&this.$router.push({name:"admin-teachers-id",params:{id:e.id}})},showAlert(e,t){Object.assign(this.alert,{type:e,message:t,open:!0})}}};function z(e,t,c,d,s,l){const n=x,i=k,m=w;return g(),C("div",null,[a(n,{items:s.breadcrumbItems},null,8,["items"]),a(b,{class:"my-4 filter-card",elevation:"3",rounded:"lg"},{default:o(()=>[a(f,{class:"d-flex align-center py-4 px-6"},{default:o(()=>[a(D,{icon:"mdi mdi-filter-outline",color:"primary",class:"me-2",size:"24"}),t[4]||(t[4]=h("h3",{class:"text-h5 font-weight-bold"},"تصفية",-1))]),_:1}),a(_),a(y,null,{default:o(()=>[a(S,{style:{"padding-block":"10px"}},{default:o(()=>[a(p,{cols:"12",md:"4"},{default:o(()=>[a(A,{modelValue:s.table.tableSettings.options.search,"onUpdate:modelValue":t[0]||(t[0]=r=>s.table.tableSettings.options.search=r),label:"بحث بالاسم أو البريد الإلكتروني",variant:"outlined",clearable:"",onKeyup:O(l.getDataAxios,["enter"]),"onClick:clear":l.handleClearSearch},null,8,["modelValue","onKeyup","onClick:clear"])]),_:1})]),_:1})]),_:1})]),_:1}),a(b,{class:"my-4 data-table-card",elevation:"3",rounded:"lg"},{default:o(()=>[a(f,{class:"py-4 px-6"},{default:o(()=>[a(S,{class:"align-center"},{default:o(()=>[a(p,{cols:"auto"},{default:o(()=>[a(B,{color:"primary",onClick:t[1]||(t[1]=r=>l.reload()),icon:"ri-refresh-line",variant:"tonal",rounded:"circle",size:"small",class:"rotate-on-hover"})]),_:1}),a(p,null,{default:o(()=>t[5]||(t[5]=[h("h3",{class:"text-h5 font-weight-bold text-center"}," قائمة المعلمين ",-1)])),_:1}),a(p,{cols:"auto"},{default:o(()=>[a(K,{color:"primary",variant:"elevated",class:"font-weight-medium"},{default:o(()=>[J(U(l.numberWithComma(s.table.totalItems))+" عدد السجلات ",1)]),_:1})]),_:1})]),_:1})]),_:1}),a(_),a(y,null,{default:o(()=>[a(i,{headers:s.table.headers,items:s.table.Data,actions:s.table.actions,loading:s.table.loading,totalItems:s.table.totalItems,tableOptions:s.table.tableSettings.options,onUpdateTableOptions:l.updateTableOptions,onShowItem:l.viewTeacher,class:"reservation-table"},null,8,["headers","items","actions","loading","totalItems","tableOptions","onUpdateTableOptions","onShowItem"])]),_:1})]),_:1}),s.alert.open?(g(),N(m,{key:0,modelValue:s.alert.open,"onUpdate:modelValue":t[2]||(t[2]=r=>s.alert.open=r),type:s.alert.type,message:s.alert.message,closable:!0,"close-text":"موافق",onClose:t[3]||(t[3]=r=>s.alert.open=!1)},null,8,["modelValue","type","message"])):T("",!0)])}const ne=E(L,[["render",z]]);export{ne as default};
