import{A as N}from"./auth_api-DATci0s4.js";import{ab as z,ac as D,ad as F,b as t,ae as O,af as K,B as M,r as p,K as R,f as m,o as u,e,i as a,n as q,d as E,t as f,q as g,c as L,F as C,s as J,ag as U,k as $,m as j,A as G}from"./index-B_A_UGf-.js";import{C as H}from"./vue3-perfect-scrollbar-Cm9cbdZF.js";import{V as S}from"./VAvatar-BaPloNUq.js";import{V as T}from"./VImg-Mh6Lj_73.js";import{V as Q,a as v,d as W,b as X}from"./VList-khjaFYbC.js";import{V as _}from"./VBadge-CXeh1H45.js";import{V as Y}from"./VDivider-Conlu035.js";import"./axios-WFtL0f35.js";const Z=D({start:Boolean,end:Boolean,...K(),...O()},"VListItemAction"),ee=z()({name:"VListItemAction",props:Z(),setup(n,r){let{slots:s}=r;return F(()=>t(n.tag,{class:["v-list-item-action",{"v-list-item-action--start":n.start,"v-list-item-action--end":n.end},n.class],style:n.style},s)),{}}}),A="/assets/avatar-1-CxOKCzdw.png",te={class:"text-sm font-weight-medium"},fe={__name:"UserProfile",setup(n){const r=M(),s=p(null),d=p(!1);R(()=>{const l=localStorage.getItem("user"),y=localStorage.getItem("accessToken");l&&y&&(s.value=JSON.parse(l),d.value=!0)});const B=l=>{l.value==="profile"?r.push("/teacher/profile-setup"):l.value==="settings"?r.push("/teacher/settings"):l.value==="billing"||l.value==="help"&&r.push("/help")},c=p(!1),P=async()=>{try{c.value=!0,await N.logout(),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),s.value=null,d.value=!1,r.push("/"),console.log("تم تسجيل الخروج بنجاح")}catch(l){console.error("خطأ في تسجيل الخروج:",l),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),s.value=null,d.value=!1,r.push("/")}finally{c.value=!1}},w=[{type:"divider"},{type:"navItem",icon:"ri-user-line",title:"الملف الشخصي",value:"profile"},{type:"navItem",icon:"ri-file-text-line",title:"الخطة",value:"billing"},{type:"divider"}];return(l,y)=>(u(),m(_,{dot:"",bordered:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success"},{default:e(()=>[t(S,{class:"cursor-pointer",size:"38"},{default:e(()=>{var h,V;return[t(T,{src:((h=a(s))==null?void 0:h.avatar)||((V=a(s))==null?void 0:V.profileImage)||a(A)},null,8,["src"]),t(q,{activator:"parent",width:"230",location:"bottom end",offset:"15px"},{default:e(()=>[t(Q,null,{default:e(()=>[t(v,null,{prepend:e(()=>[t(ee,{start:""},{default:e(()=>[t(_,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success"},{default:e(()=>[t(S,{color:"primary",variant:"tonal"},{default:e(()=>{var o,i;return[t(T,{src:((o=a(s))==null?void 0:o.avatar)||((i=a(s))==null?void 0:i.profileImage)||a(A)},null,8,["src"])]}),_:1})]),_:1})]),_:1})]),default:e(()=>{var o,i;return[E("h6",te,f(((o=a(s))==null?void 0:o.name)||((i=a(s))==null?void 0:i.firstName)||"المستخدم"),1),t(W,{class:"text-capitalize text-disabled"},{default:e(()=>{var I,k,b,x;return[g(f(((I=a(s))==null?void 0:I.userType)==="student"?"طالب":((k=a(s))==null?void 0:k.userType)==="teacher"?"معلم":((b=a(s))==null?void 0:b.userType)==="admin"?"إداري":((x=a(s))==null?void 0:x.userType)==="super_admin"?"مدير عام":"مستخدم"),1)]}),_:1})]}),_:1}),t(a(H),{options:{wheelPropagation:!1}},{default:e(()=>[(u(),L(C,null,J(w,o=>(u(),L(C,{key:o.title},[o.type==="navItem"?(u(),m(v,{key:0,value:o.value,onClick:i=>B(o)},U({prepend:e(()=>[t($,{icon:o.icon,size:"22"},null,8,["icon"])]),default:e(()=>[t(X,null,{default:e(()=>[g(f(o.title),1)]),_:2},1024)]),_:2},[o.badgeProps?{name:"append",fn:e(()=>[t(_,j({inline:"",ref_for:!0},o.badgeProps),null,16)]),key:"0"}:void 0]),1032,["value","onClick"])):(u(),m(Y,{key:1,class:"my-1"}))],64))),64)),t(v,null,{default:e(()=>[t(G,{block:"",color:"error","append-icon":"ri-logout-box-r-line",loading:a(c),disabled:a(c),onClick:P},{default:e(()=>[g(f(a(c)?"جاري تسجيل الخروج...":"تسجيل الخروج"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]}),_:1})]),_:1}))}};export{fe as default};
