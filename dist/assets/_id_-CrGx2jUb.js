import{_ as M}from"./BaseAlert-DhiW1pkC.js";import{_ as Z}from"./AppBreadcrumbs-CL1Mn0e1.js";import{r as c,z as q,m as G,c as A,b as e,f as i,n as $,e as s,l as H,k as J,o as n,d as l,p as y,at as K,s as _,t as a,aZ as O,F as Q,x as W,V as X,v as Y}from"./index-Cq5mHdd1.js";import{u as tt}from"./useAuth-DgofbqzM.js";import{a as et}from"./axios-lwY36-Bu.js";import{V as k,a as h}from"./VCard-DJFVzfaq.js";import{V as B,a as u}from"./VRow-C1y3VVie.js";import{V as st}from"./VDialog-BARV40Gk.js";import{V as C}from"./VDivider-BttVlJLf.js";import{V as x}from"./VCardText-DbIVWSue.js";import{V as lt}from"./VAvatar-B2hOBT8r.js";import{V as U}from"./VImg-BgkOcihp.js";import{V as R}from"./VChip-CKn48zu6.js";import{V as at,a as ot,b as nt,d as ut}from"./VList-BLaYBSlW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const rt={class:"text-h5 mt-4"},it={class:"text-body-2 mb-1"},dt={class:"text-body-2 mb-1"},mt={class:"text-body-2"},pt={class:"text-body-2"},ct={class:"text-body-2"},ft={class:"text-h6"},vt={class:"text-h6"},_t={class:"text-h6"},xt={class:"text-h6"},bt={class:"text-h6"},yt={class:"text-h6"},gt={class:"text-h6"},Vt={class:"text-h6"},kt={key:1,class:"text-body-2"},Pt={__name:"[id]",setup(ht){const F=H(),I=J(),{hasPermission:P}=tt(),L=c(!0),r=c(null),m=c(null),w=c([]),f=c({open:!1,message:null,type:"success"}),D=c(""),g=c(!1),b=q(()=>{var v;if(!((v=r.value)!=null&&v.profile_image_path))return null;const d=D.value||"",t=r.value.profile_image_path;return d?`${d}${t}`:t}),N=d=>{if(!d)return"-";const t=new Date(d);return Number.isNaN(t.getTime())?"-":t.toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"2-digit"})},j=c([{title:"الرئيسية",disabled:!1,to:"/admin/dashboard"},{title:"المعلمين",disabled:!1,to:"/admin/teachers/show-teachers"},{title:"تفاصيل المعلم",disabled:!0}]),S=(d,t)=>{f.value={open:!0,type:d,message:t}},E=async()=>{var t,v,V,o,T;const d=F.params.id;if(!d){I.push("/admin/teachers/show-teachers");return}if(!P("super_admin")){I.push("/login");return}try{const p=await et.get(`/super-admin/teachers/${d}`);if(!((t=p.data)!=null&&t.success)){S("error",((v=p.data)==null?void 0:v.message)||"المعلم غير موجود");return}D.value=((V=p.data)==null?void 0:V.content_url)||"";const z=p.data.data||{};r.value=z.teacher||null,m.value=z.stats||null,w.value=z.recentCourses||[]}catch(p){S("error",((T=(o=p==null?void 0:p.response)==null?void 0:o.data)==null?void 0:T.message)||"حدث خطأ أثناء جلب بيانات المعلم")}finally{L.value=!1}};return G(()=>{E()}),(d,t)=>{const v=Z,V=M;return n(),A("div",null,[e(v,{items:j.value},null,8,["items"]),e(k,{class:"my-4",elevation:"3",rounded:"lg"},{default:s(()=>[e(h,{class:"d-flex align-center py-4 px-6"},{default:s(()=>[e(y,{icon:"mdi-account",color:"primary",class:"me-2",size:"24"}),t[5]||(t[5]=l("h3",{class:"text-h5 font-weight-bold"},"بيانات المعلم",-1))]),_:1}),e(C),L.value?(n(),i(x,{key:0},{default:s(()=>[e(K,{indeterminate:"",color:"primary"})]),_:1})):(n(),i(x,{key:1},{default:s(()=>[r.value?(n(),i(B,{key:0},{default:s(()=>[e(u,{cols:"12",md:"4",class:"text-center"},{default:s(()=>[e(lt,{size:"100",color:"primary",class:"cursor-pointer",onClick:t[0]||(t[0]=o=>b.value&&(g.value=!0))},{default:s(()=>[b.value?(n(),i(U,{key:0,src:b.value,cover:""},null,8,["src"])):(n(),i(y,{key:1,size:"48"},{default:s(()=>t[6]||(t[6]=[_("mdi-account")])),_:1}))]),_:1}),l("h2",rt,a(r.value.name),1),l("p",it,a(r.value.email),1),l("p",dt,a(r.value.phone),1),e(R,{color:r.value.status==="active"?"success":"warning",size:"small",class:"mt-2"},{default:s(()=>[_(a(r.value.status==="active"?"نشط":"غير نشط"),1)]),_:1},8,["color"])]),_:1}),e(u,{cols:"12",md:"8"},{default:s(()=>[e(B,null,{default:s(()=>[e(u,{cols:"12",md:"6"},{default:s(()=>[t[7]||(t[7]=l("p",{class:"text-subtitle-2 mb-1"},"العنوان",-1)),l("p",mt,a(r.value.address||"-"),1)]),_:1}),e(u,{cols:"12",md:"6"},{default:s(()=>[t[8]||(t[8]=l("p",{class:"text-subtitle-2 mb-1"},"سنوات الخبرة",-1)),l("p",pt,a(r.value.experience_years??0),1)]),_:1}),e(u,{cols:"12"},{default:s(()=>[t[9]||(t[9]=l("p",{class:"text-subtitle-2 mb-1"},"نبذة",-1)),l("p",ct,a(r.value.bio||"لا توجد نبذة"),1)]),_:1})]),_:1})]),_:1})]),_:1})):(n(),i(O,{key:1,type:"error",variant:"tonal",class:"mt-4"},{default:s(()=>t[10]||(t[10]=[_(" المعلم غير موجود ")])),_:1}))]),_:1}))]),_:1}),e(B,null,{default:s(()=>[e(u,{cols:"12",md:"6"},{default:s(()=>[e(k,{class:"my-4",elevation:"3",rounded:"lg"},{default:s(()=>[e(h,{class:"d-flex align-center py-4 px-6"},{default:s(()=>[e(y,{icon:"mdi-chart-bar",color:"primary",class:"me-2",size:"24"}),t[11]||(t[11]=l("h3",{class:"text-h6 font-weight-bold"},"إحصائيات المعلم",-1))]),_:1}),e(C),m.value?(n(),i(x,{key:0},{default:s(()=>[e(B,null,{default:s(()=>[e(u,{cols:"6"},{default:s(()=>[t[12]||(t[12]=l("p",{class:"text-subtitle-2 mb-1"},"إجمالي الدورات",-1)),l("p",ft,a(m.value.totalCourses??0),1)]),_:1}),e(u,{cols:"6"},{default:s(()=>[t[13]||(t[13]=l("p",{class:"text-subtitle-2 mb-1"},"إجمالي الطلاب",-1)),l("p",vt,a(m.value.totalStudents??0),1)]),_:1}),e(u,{cols:"6"},{default:s(()=>[t[14]||(t[14]=l("p",{class:"text-subtitle-2 mb-1"},"إجمالي الحجوزات",-1)),l("p",_t,a(m.value.totalBookings??0),1)]),_:1}),e(u,{cols:"6"},{default:s(()=>[t[15]||(t[15]=l("p",{class:"text-subtitle-2 mb-1"},"الحجوزات المعلقة",-1)),l("p",xt,a(m.value.pendingBookings??0),1)]),_:1}),e(u,{cols:"6"},{default:s(()=>[t[16]||(t[16]=l("p",{class:"text-subtitle-2 mb-1"},"حجوزات بانتظار الموافقة",-1)),l("p",bt,a(m.value.preApprovedBookings??0),1)]),_:1}),e(u,{cols:"6"},{default:s(()=>[t[17]||(t[17]=l("p",{class:"text-subtitle-2 mb-1"},"الحجوزات المؤكدة",-1)),l("p",yt,a(m.value.confirmedBookings??0),1)]),_:1}),e(u,{cols:"6"},{default:s(()=>[t[18]||(t[18]=l("p",{class:"text-subtitle-2 mb-1"},"الحجوزات المرفوضة",-1)),l("p",gt,a(m.value.rejectedBookings??0),1)]),_:1}),e(u,{cols:"6"},{default:s(()=>[t[19]||(t[19]=l("p",{class:"text-subtitle-2 mb-1"},"الحجوزات الملغاة",-1)),l("p",Vt,a(m.value.cancelledBookings??0),1)]),_:1})]),_:1})]),_:1})):(n(),i(x,{key:1},{default:s(()=>t[20]||(t[20]=[l("p",{class:"text-body-2"},"لا توجد إحصائيات متاحة.",-1)])),_:1}))]),_:1})]),_:1}),e(u,{cols:"12",md:"6"},{default:s(()=>[e(k,{class:"my-4",elevation:"3",rounded:"lg"},{default:s(()=>[e(h,{class:"d-flex align-center py-4 px-6"},{default:s(()=>[e(y,{icon:"mdi-book-open-page-variant",color:"primary",class:"me-2",size:"24"}),t[21]||(t[21]=l("h3",{class:"text-h6 font-weight-bold"},"أحدث الدورات",-1))]),_:1}),e(C),e(x,null,{default:s(()=>[w.value.length?(n(),i(at,{key:0},{default:s(()=>[(n(!0),A(Q,null,W(w.value,o=>(n(),i(ot,{key:o.id},{append:s(()=>[e(R,{color:"primary",variant:"outlined",size:"small"},{default:s(()=>[_(a(o.price),1)]),_:2},1024)]),default:s(()=>[e(nt,null,{default:s(()=>[_(a(o.course_name),1)]),_:2},1024),e(ut,null,{default:s(()=>[_(a(o.study_year)+" • "+a(N(o.start_date))+" - "+a(N(o.end_date)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(n(),A("p",kt," لا توجد دورات حديثة. "))]),_:1})]),_:1})]),_:1})]),_:1}),f.value.open?(n(),i(V,{key:0,modelValue:f.value.open,"onUpdate:modelValue":t[1]||(t[1]=o=>f.value.open=o),type:f.value.type,message:f.value.message,closable:!0,"close-text":"موافق",onClose:t[2]||(t[2]=o=>f.value.open=!1)},null,8,["modelValue","type","message"])):$("",!0),e(st,{modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=o=>g.value=o),"max-width":"500"},{default:s(()=>[e(k,null,{default:s(()=>[e(h,{class:"d-flex align-center"},{default:s(()=>[t[23]||(t[23]=l("span",{class:"text-subtitle-1"},"صورة المعلم",-1)),e(X),e(Y,{icon:"",variant:"text",onClick:t[3]||(t[3]=o=>g.value=!1)},{default:s(()=>[e(y,null,{default:s(()=>t[22]||(t[22]=[_("mdi-close")])),_:1})]),_:1})]),_:1}),e(C),e(x,{class:"text-center"},{default:s(()=>[b.value?(n(),i(U,{key:0,src:b.value,"max-height":"400",contain:""},null,8,["src"])):$("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Pt as default};
