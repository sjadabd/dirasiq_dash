import{A as N}from"./auth_api-B_3Owhbj.js";import{ab as z,ac as D,ad as F,b as t,ae as O,af as M,k as R,r as p,m as q,f as m,o as u,e,i as a,q as E,d as J,t as f,s as g,c as L,F as C,x as K,ag as U,p as $,y as j,v as G}from"./index-CXn58W-A.js";import{C as H}from"./vue3-perfect-scrollbar-DOInTAEN.js";import{V as S}from"./VAvatar-RzyGemFQ.js";import{V as T}from"./VImg-Cara8jvF.js";import{V as Q,a as v,d as W,b as X}from"./VList-CSVmTKRH.js";import{V as _}from"./VBadge-C6gy_AIH.js";import{V as Y}from"./VDivider-BMfDbzm1.js";import"./axios-DwhOaX7i.js";const Z=D({start:Boolean,end:Boolean,...M(),...O()},"VListItemAction"),ee=z()({name:"VListItemAction",props:Z(),setup(n,r){let{slots:s}=r;return F(()=>t(n.tag,{class:["v-list-item-action",{"v-list-item-action--start":n.start,"v-list-item-action--end":n.end},n.class],style:n.style},s)),{}}}),P="/assets/avatar-1-CxOKCzdw.png",te={class:"text-sm font-weight-medium"},fe={__name:"UserProfile",setup(n){const r=R(),s=p(null),d=p(!1);q(()=>{const l=localStorage.getItem("user"),h=localStorage.getItem("accessToken");l&&h&&(s.value=JSON.parse(l),d.value=!0)});const A=l=>{l.value==="profile"?r.push("/teacher/profile-setup"):l.value==="settings"?r.push("/teacher/settings"):l.value==="billing"?r.push("/teacher/billing"):l.value==="help"&&r.push("/help")},c=p(!1),B=async()=>{try{c.value=!0,await N.logout(),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),s.value=null,d.value=!1,r.push("/"),console.log("تم تسجيل الخروج بنجاح")}catch(l){console.error("خطأ في تسجيل الخروج:",l),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),s.value=null,d.value=!1,r.push("/")}finally{c.value=!1}},w=[{type:"divider"},{type:"navItem",icon:"ri-user-line",title:"الملف الشخصي",value:"profile"},{type:"navItem",icon:"ri-file-text-line",title:"الخطة",value:"billing"},{type:"divider"}];return(l,h)=>(u(),m(_,{dot:"",bordered:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success"},{default:e(()=>[t(S,{class:"cursor-pointer",size:"38"},{default:e(()=>{var y,V;return[t(T,{src:((y=a(s))==null?void 0:y.avatar)||((V=a(s))==null?void 0:V.profileImage)||a(P)},null,8,["src"]),t(E,{activator:"parent",width:"230",location:"bottom end",offset:"15px"},{default:e(()=>[t(Q,null,{default:e(()=>[t(v,null,{prepend:e(()=>[t(ee,{start:""},{default:e(()=>[t(_,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success"},{default:e(()=>[t(S,{color:"primary",variant:"tonal"},{default:e(()=>{var o,i;return[t(T,{src:((o=a(s))==null?void 0:o.avatar)||((i=a(s))==null?void 0:i.profileImage)||a(P)},null,8,["src"])]}),_:1})]),_:1})]),_:1})]),default:e(()=>{var o,i;return[J("h6",te,f(((o=a(s))==null?void 0:o.name)||((i=a(s))==null?void 0:i.firstName)||"المستخدم"),1),t(W,{class:"text-capitalize text-disabled"},{default:e(()=>{var I,k,b,x;return[g(f(((I=a(s))==null?void 0:I.userType)==="student"?"طالب":((k=a(s))==null?void 0:k.userType)==="teacher"?"معلم":((b=a(s))==null?void 0:b.userType)==="admin"?"إداري":((x=a(s))==null?void 0:x.userType)==="super_admin"?"مدير عام":"مستخدم"),1)]}),_:1})]}),_:1}),t(a(H),{options:{wheelPropagation:!1}},{default:e(()=>[(u(),L(C,null,K(w,o=>(u(),L(C,{key:o.title},[o.type==="navItem"?(u(),m(v,{key:0,value:o.value,onClick:i=>A(o)},U({prepend:e(()=>[t($,{icon:o.icon,size:"22"},null,8,["icon"])]),default:e(()=>[t(X,null,{default:e(()=>[g(f(o.title),1)]),_:2},1024)]),_:2},[o.badgeProps?{name:"append",fn:e(()=>[t(_,j({inline:"",ref_for:!0},o.badgeProps),null,16)]),key:"0"}:void 0]),1032,["value","onClick"])):(u(),m(Y,{key:1,class:"my-1"}))],64))),64)),t(v,null,{default:e(()=>[t(G,{block:"",color:"error","append-icon":"ri-logout-box-r-line",loading:a(c),disabled:a(c),onClick:B},{default:e(()=>[g(f(a(c)?"جاري تسجيل الخروج...":"تسجيل الخروج"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]}),_:1})]),_:1}))}};export{fe as default};
