import{_ as j}from"./BaseAlert-wMiE8tvl.js";import{_ as z}from"./ConfirmDangerDialog-BF62C-QL.js";import{_ as F}from"./AppDateTimePicker-CERTQ4pT.js";import{_ as W}from"./SmartTable-BNEhEptK.js";import{_ as H}from"./AppBreadcrumbs-5R_D72iC.js";import f from"./teacher_api-DyrQANjO.js";import{n as Y}from"./number-DRUmGIrN.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as w,a as I,c as N,b as U}from"./VCard-CTAW927Q.js";import{V as B}from"./VDialog-DdZwyjMa.js";import{c as h,b as l,f as b,n as O,e as a,o as m,d as _,p as V,v as y,s as c,t as k,b1 as G,V as A,F as L,x as J,b0 as K}from"./index-N2EhsRQt.js";import{V as C}from"./VDivider-D-Cf14qE.js";import{V as v,a as p}from"./VRow--YcB0Yd0.js";import{V as T}from"./VSelect-Di_TKuth.js";import{V as P}from"./VChip-v8q_B89j.js";import{V as E}from"./VCardText-Q2eeque7.js";import{V as M}from"./VSwitch-Chl24H7G.js";import"./VDataTable-CWyK32cU.js";import"./VTable-uKW7adu2.js";import"./filter-0X3vSYrS.js";import"./VTooltip-qYS1AgXw.js";import"./axios-CK0PAUQZ.js";import"./VAvatar-M6cRQjPV.js";import"./VImg-DOYF3Gzb.js";import"./VList-BwysrA6o.js";const Q={data(){var s;return{keyName:"manage-sessions",results:JSON.parse(localStorage.getItem("user")),breadcrumbItems:[{title:"الرئيسية",disabled:!1,to:"/teacher/index"},{title:"الجلسات",disabled:!0}],loading:!1,progress:0,weekdays:[{text:"الكل",value:null},{text:"الأحد",value:0},{text:"الاثنين",value:1},{text:"الثلاثاء",value:2},{text:"الأربعاء",value:3},{text:"الخميس",value:4},{text:"الجمعة",value:5},{text:"السبت",value:6}],table:{totalItems:0,Data:[],actions:["عرض الطلاب","إضافة طلاب","إنهاء الجلسة","تعديل","حذف"],loading:!1,headers:[{title:"#",type:"strong",sortable:!1,key:"num"},{title:"العنوان",type:"link",sortable:!0,key:"title"},{title:"الدورة",type:"strong",sortable:!0,key:"course_name"},{title:"المرحلة",type:"strong",sortable:!0,key:"grade_name"},{title:"عدد الطلاب",type:"strong",sortable:!0,key:"attendees_count"},{title:"اليوم",type:"strong",sortable:!0,key:"weekdayLabel"},{title:"من",type:"strong",sortable:!0,key:"start_time"},{title:"إلى",type:"strong",sortable:!0,key:"end_time"},{title:"العمليات",type:"strong",sortable:!1,key:"actions"}],tableSettings:{options:{page:1,limit:10,search:null,weekday:null}}},sessionDialog:{open:!1,mode:"create",form:{id:null,title:"",course_id:"",teacher_id:(s=JSON.parse(localStorage.getItem("user")))==null?void 0:s.id,weekdays:[],start_time:"",end_time:"",recurrence:!0,flex_type:null,flex_minutes:null}},attendeesDialog:{open:!1,data:null,loading:!1,candidates:[],selectedIds:[],currentIds:[],currentDetailed:[]},studentsViewDialog:{open:!1,data:null,loading:!1,loadingItem:null,students:[]},endDialog:{open:!1,data:null,messages:["سيتم إنهاء المحاضرة وإشعار الطلاب الحاضرين اليوم."],title:"تأكيد إنهاء الجلسة",confirmButtonText:"إنهاء الجلسة",saving:!1,menus:{start:!1,end:!1}},deleteDialog:{open:!1,loading:!1,data:null,messages:["سيتم حذف الجلسة.","لا يمكن استرجاعها بعد الحذف."],title:"تأكيد الحذف",confirmButtonText:"حذف الجلسة"},alert:{open:!1,message:null,type:"success"},courseItems:[],coursesLoading:!1,flexTypes:[{text:"نافذة (window)",value:"window"},{text:"ثابت (fixed)",value:"fixed"},{text:"بدون",value:null}]}},created(){const s=JSON.parse(localStorage.getItem(this.keyName));this.table.tableSettings=s||this.table.tableSettings,this.tempScrollTop=(s==null?void 0:s.scrollTop)||0,this.loadCourseNames()},mounted(){window.addEventListener("scroll",this.handleScroll),this.$watch(()=>this.table.Data,s=>{(s==null?void 0:s.length)>0&&this.tempScrollTop&&setTimeout(()=>{window.scrollTo({top:this.tempScrollTop,behavior:"smooth"}),this.tempScrollTop=0},300)},{deep:!0})},beforeUnmount(){var s;(s=this.unwatch)==null||s.call(this),window.removeEventListener("scroll",this.handleScroll)},methods:{numberWithComma:Y,weekdayName(s){const e=["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"];return Number.isInteger(s)&&s>=0&&s<=6?e[s]:String(s??"")},formatWeekdays(s){return Array.isArray(s)?s.map(this.weekdayName).join("، "):this.weekdayName(s)},handleScroll(){const s=window.scrollY||window.pageYOffset,e=JSON.parse(localStorage.getItem(this.keyName))||{};e.scrollTop=s,localStorage.setItem(this.keyName,JSON.stringify(e))},reload(){localStorage.removeItem(this.keyName),this.table.tableSettings.options={page:1,limit:10,search:null,weekday:null},this.getDataAxios()},updateTableOptions(s){this.table.tableSettings.options={...this.table.tableSettings.options,...s,search:s.search?s.search:null},this.getDataAxios()},async getDataAxios(){var e,d,n;this.progress=0,this.loading=!0;const s=setInterval(()=>{this.progress<90&&(this.progress+=10)},100);try{localStorage.setItem(this.keyName,JSON.stringify(this.table.tableSettings));const t=await f.getSessions(this.table.tableSettings),i=(t==null?void 0:t.data)||{},u=i.data||i.sessions||[];this.table.Data=u.map(r=>({...r,weekdayLabel:r.hasOwnProperty("weekdays")?this.formatWeekdays(r.weekdays):this.formatWeekdays(r.weekday)})),this.table.totalItems=i.count||i.total||((e=i.pagination)==null?void 0:e.total)||0}catch(t){this.showAlert("error",((n=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:n.message)||"حدث خطأ أثناء جلب البيانات")}finally{clearInterval(s),this.progress=100,setTimeout(()=>{this.loading=!1,this.progress=0},500)}},async loadCourseNames(){var s;try{this.coursesLoading=!0;const e=await f.getCourseNames(),d=((s=e==null?void 0:e.data)==null?void 0:s.data)||[];this.courseItems=d.map(n=>({text:n.name,value:n.id}))}catch{this.showAlert("error","تعذر جلب أسماء الدورات")}finally{this.coursesLoading=!1}},openCreateDialog(){var s;this.sessionDialog.mode="create",this.sessionDialog.form={id:null,title:"",course_id:"",teacher_id:(s=JSON.parse(localStorage.getItem("user")))==null?void 0:s.id,weekdays:[],start_time:"",end_time:"",recurrence:!0,flex_type:null,flex_minutes:null},this.sessionDialog.open=!0},editItem(s){var e,d;this.sessionDialog.mode="edit",this.sessionDialog.form={id:s.id,title:s.title||"",course_id:s.course_id||((e=s.course)==null?void 0:e.id)||"",teacher_id:(d=JSON.parse(localStorage.getItem("user")))==null?void 0:d.id,weekdays:Array.isArray(s.weekdays)?s.weekdays:s.weekday!==void 0?[s.weekday]:[],start_time:s.start_time,end_time:s.end_time,recurrence:s.recurrence??!0,flex_type:s.flex_type??null,flex_minutes:s.flex_minutes??null},this.sessionDialog.open=!0},async saveSession(){var n,t,i,u;const s=this.sessionDialog.mode==="create",e=this.sessionDialog.form;if(!e.course_id||e.weekdays.length===0||!e.start_time||!e.end_time){this.showAlert("error","الحقول الأساسية مطلوبة");return}this.progress=0,this.loading=!0;const d=setInterval(()=>{this.progress<90&&(this.progress+=10)},100);try{let r;if(s){const D={course_id:e.course_id,teacher_id:e.teacher_id,weekdays:e.weekdays,start_time:e.start_time,end_time:e.end_time,title:e.title||void 0,recurrence:e.recurrence===!0,flex_type:e.flex_type??null,flex_minutes:e.flex_minutes??null,flex_alternates:null,hard_constraints:null,soft_constraints:null,state:"confirmed"};r=await f.createSession(D)}else{const D={course_id:e.course_id,teacher_id:e.teacher_id,weekday:(n=e.weekdays)==null?void 0:n[0],start_time:e.start_time,end_time:e.end_time,title:e.title||void 0,recurrence:e.recurrence===!0,flex_type:e.flex_type??null,flex_minutes:e.flex_minutes??null,state:"confirmed"};r=await f.updateSession(e.id,D)}this.showAlert("success",((t=r==null?void 0:r.data)==null?void 0:t.message)||(s?"تم إنشاء الجلسة":"تم تحديث الجلسة")),this.sessionDialog.open=!1,this.getDataAxios()}catch(r){this.showAlert("error",((u=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:u.message)||"حدث خطأ أثناء الحفظ")}finally{clearInterval(d),this.progress=100,setTimeout(()=>{this.loading=!1,this.progress=0},500)}},openAddAttendeesDialog(s){this.attendeesDialog.data=s,this.attendeesDialog.open=!0,this.attendeesDialog.candidates=[],this.attendeesDialog.selectedIds=[],this.attendeesDialog.currentIds=[],this.attendeesDialog.currentDetailed=[],this.loadAddDialogData()},async loadAddDialogData(){var s,e,d,n,t;try{this.attendeesDialog.loading=!0;const i=await f.getSessionAttendees(this.attendeesDialog.data.id),u=((s=i==null?void 0:i.data)==null?void 0:s.data)||[],r=u.map(g=>typeof g=="object"?g.student_id||g.id:g).filter(Boolean),D=u.map(g=>typeof g=="object"?g:{student_id:g,student_name:String(g)});this.attendeesDialog.currentIds=r,this.attendeesDialog.currentDetailed=D;const x=this.attendeesDialog.data.course_id||((e=this.attendeesDialog.data.course)==null?void 0:e.id);if(!x)throw new Error("لا يوجد معرّف كورس في هذه الجلسة");const S=await f.getCourseConfirmedStudents(x),o=((d=S==null?void 0:S.data)==null?void 0:d.data)||[];this.attendeesDialog.candidates=o,this.attendeesDialog.selectedIds=o.map(g=>g.student_id).filter(g=>this.attendeesDialog.currentIds.includes(g))}catch(i){this.showAlert("error",((t=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:t.message)||(i==null?void 0:i.message)||"تعذر تحميل الطلاب")}finally{this.attendeesDialog.loading=!1}},async submitAddAttendees(){var t,i,u;const s=this.attendeesDialog.selectedIds||[],e=this.attendeesDialog.currentIds||[],d=s.filter(r=>!e.includes(r));if(d.length===0){this.showAlert("info","لا توجد إضافات جديدة"),this.attendeesDialog.open=!1;return}this.progress=0,this.loading=!0,this.attendeesDialog.loading=!0;const n=setInterval(()=>{this.progress<90&&(this.progress+=10)},100);try{const r=await f.addSessionAttendees(this.attendeesDialog.data.id,d);this.showAlert("success",((t=r==null?void 0:r.data)==null?void 0:t.message)||"تم حفظ التغييرات"),await this.loadAddDialogData(),this.attendeesDialog.open=!1}catch(r){this.showAlert("error",((u=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:u.message)||"تعذر إضافة الطلاب")}finally{clearInterval(n),this.progress=100,setTimeout(()=>{this.loading=!1,this.progress=0,this.attendeesDialog.loading=!1},500)}},openViewStudentsDialog(s){this.studentsViewDialog.data=s,this.studentsViewDialog.open=!0,this.studentsViewDialog.students=[],this.loadStudentsView()},openEndSessionDialog(s){this.endDialog.data=s,this.endDialog.open=!0},navigateToAttendance(s){s!=null&&s.id&&this.$router.push(`/teacher/sessions/attendance/${s.id}`)},async loadStudentsView(){var s,e,d;try{this.studentsViewDialog.loading=!0;const n=await f.getSessionAttendees(this.studentsViewDialog.data.id),i=(((s=n==null?void 0:n.data)==null?void 0:s.data)||[]).map(u=>typeof u=="object"?u:{student_id:u,student_name:String(u),grade_name:"",study_year:""});this.studentsViewDialog.students=i}catch(n){this.showAlert("error",((d=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:d.message)||"تعذر جلب طلاب الجلسة")}finally{this.studentsViewDialog.loading=!1}},async handleEndSession(){var e,d,n;this.progress=0,this.loading=!0;const s=setInterval(()=>{this.progress<90&&(this.progress+=10)},100);try{const t=await f.endSession(this.endDialog.data.id);this.showAlert("success",((e=t==null?void 0:t.data)==null?void 0:e.message)||"تم إنهاء الجلسة وإشعار الطلاب"),this.getDataAxios()}catch(t){this.showAlert("error",((n=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:n.message)||"تعذر إنهاء الجلسة")}finally{clearInterval(s),this.progress=100,setTimeout(()=>{this.loading=!1,this.progress=0,this.endDialog.open=!1},500)}},deleteItem(s){this.deleteDialog.data=s,this.deleteDialog.open=!0},async handleDelete(){var e,d,n;this.progress=0,this.loading=!0;const s=setInterval(()=>{this.progress<90&&(this.progress+=10)},100);try{const t=await f.deleteSession(this.deleteDialog.data.id);this.showAlert("success",((e=t==null?void 0:t.data)==null?void 0:e.message)||"تم حذف الجلسة"),this.getDataAxios()}catch(t){this.showAlert("error",((n=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:n.message)||"تعذر حذف الجلسة")}finally{clearInterval(s),this.progress=100,setTimeout(()=>{this.loading=!1,this.progress=0,this.deleteDialog.open=!1},500)}},allowEvery5(s){return s%5===0},showAlert(s,e){this.alert={open:!0,type:s,message:e}}}},X={key:0,class:"text-medium-emphasis"},Z={key:1},R={key:0,class:"d-flex flex-wrap gap-2"},$={key:1,class:"text-medium-emphasis"},ee={key:0,class:"text-medium-emphasis"},te={key:1},se={class:"text-subtitle-1"},le={class:"text-caption text-medium-emphasis"};function ae(s,e,d,n,t,i){const u=H,r=W,D=F,x=z,S=j;return m(),h("div",null,[l(u,{items:t.breadcrumbItems},null,8,["items"]),l(w,{class:"my-4 operations-card",elevation:"3",rounded:"lg"},{default:a(()=>[l(I,{class:"d-flex align-center py-4 px-6"},{default:a(()=>[l(V,{icon:"mdi-cog-outline",color:"primary",class:"me-2",size:"24"}),e[22]||(e[22]=_("h3",{class:"text-h5 font-weight-bold"},"العمليات",-1))]),_:1}),l(C),l(N,null,{default:a(()=>[l(v,{class:"align-center justify-start pa-2"},{default:a(()=>[l(y,{color:"primary",class:"ma-2","prepend-icon":"ri-add-line",rounded:"pill",elevation:"2",size:"default",onClick:i.openCreateDialog},{default:a(()=>e[23]||(e[23]=[c(" إضافة جلسة ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),l(w,{class:"my-4",elevation:"3",rounded:"lg"},{default:a(()=>[l(I,{class:"d-flex align-center py-4 px-6"},{default:a(()=>[l(V,{icon:"mdi mdi-filter-outline",color:"primary",class:"me-2",size:"24"}),e[24]||(e[24]=_("h3",{class:"text-h5 font-weight-bold"},"تصفية",-1))]),_:1}),l(C),l(N,null,{default:a(()=>[l(v,{class:"py-3"},{default:a(()=>[l(p,{cols:"12",md:"4"},{default:a(()=>[l(T,{modelValue:t.table.tableSettings.options.weekday,"onUpdate:modelValue":[e[0]||(e[0]=o=>t.table.tableSettings.options.weekday=o),i.getDataAxios],items:t.weekdays,"item-title":"text","item-value":"value",label:"يوم الأسبوع",variant:"outlined",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),l(p,{cols:"12",md:"4"},{default:a(()=>[l(T,{modelValue:t.table.tableSettings.options.course_id,"onUpdate:modelValue":[e[1]||(e[1]=o=>t.table.tableSettings.options.course_id=o),i.getDataAxios],items:t.courseItems,"item-title":"text","item-value":"value",label:"الكورس",variant:"outlined",loading:t.coursesLoading,disabled:t.coursesLoading,clearable:""},null,8,["modelValue","items","loading","disabled","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{class:"my-4",elevation:"3",rounded:"lg"},{default:a(()=>[l(I,{class:"py-4 px-6"},{default:a(()=>[l(v,{class:"align-center"},{default:a(()=>[l(p,{cols:"auto"},{default:a(()=>[l(y,{color:"primary",onClick:e[2]||(e[2]=o=>i.reload()),icon:"ri-refresh-line",variant:"tonal",rounded:"circle",size:"small"})]),_:1}),l(p,null,{default:a(()=>e[25]||(e[25]=[_("h3",{class:"text-h6 font-weight-bold text-center"},"قائمة الجلسات",-1)])),_:1}),l(p,{cols:"auto"},{default:a(()=>[l(P,{color:"primary",variant:"elevated",class:"font-weight-medium"},{default:a(()=>[c(k(i.numberWithComma(t.table.totalItems))+" عدد السجلات ",1)]),_:1})]),_:1})]),_:1})]),_:1}),l(C),l(N,null,{default:a(()=>[l(r,{headers:t.table.headers,items:t.table.Data,actions:t.table.actions,loading:t.table.loading,totalItems:t.table.totalItems,tableOptions:t.table.tableSettings.options,onUpdateTableOptions:i.updateTableOptions,onEditItem:i.editItem,onDeleteItem:i.deleteItem,onShowItem:i.navigateToAttendance,onShowAttendeesItem:i.openViewStudentsDialog,onAddAttendeesItem:i.openAddAttendeesDialog,onEndSessionItem:i.openEndSessionDialog},null,8,["headers","items","actions","loading","totalItems","tableOptions","onUpdateTableOptions","onEditItem","onDeleteItem","onShowItem","onShowAttendeesItem","onAddAttendeesItem","onEndSessionItem"])]),_:1})]),_:1}),l(B,{modelValue:t.sessionDialog.open,"onUpdate:modelValue":e[10]||(e[10]=o=>t.sessionDialog.open=o),"max-width":"700"},{default:a(()=>[l(w,{title:t.sessionDialog.mode==="create"?"إضافة جلسة":"تعديل الجلسة"},{default:a(()=>[l(E,null,{default:a(()=>[l(v,null,{default:a(()=>[l(p,{cols:"12"},{default:a(()=>[l(G,{modelValue:t.sessionDialog.form.title,"onUpdate:modelValue":e[3]||(e[3]=o=>t.sessionDialog.form.title=o),label:"عنوان الجلسة",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(p,{cols:"12",md:"6"},{default:a(()=>[l(T,{modelValue:t.sessionDialog.form.course_id,"onUpdate:modelValue":e[4]||(e[4]=o=>t.sessionDialog.form.course_id=o),items:t.courseItems,"item-title":"text","item-value":"value",label:"اختر الكورس",variant:"outlined",loading:t.coursesLoading,disabled:t.coursesLoading,clearable:""},null,8,["modelValue","items","loading","disabled"])]),_:1}),l(p,{cols:"12",md:"6"},{default:a(()=>[l(T,{modelValue:t.sessionDialog.form.weekdays,"onUpdate:modelValue":e[5]||(e[5]=o=>t.sessionDialog.form.weekdays=o),items:t.weekdays.filter(o=>o.value!==null),"item-title":"text","item-value":"value",label:"أيام الأسبوع",multiple:"",chips:"",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),l(p,{cols:"12",md:"3"},{default:a(()=>[l(D,{modelValue:t.sessionDialog.form.start_time,"onUpdate:modelValue":e[6]||(e[6]=o=>t.sessionDialog.form.start_time=o),label:"بداية",variant:"outlined",clearable:"",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:5}},null,8,["modelValue"])]),_:1}),l(p,{cols:"12",md:"3"},{default:a(()=>[l(D,{modelValue:t.sessionDialog.form.end_time,"onUpdate:modelValue":e[7]||(e[7]=o=>t.sessionDialog.form.end_time=o),label:"نهاية",variant:"outlined",clearable:"",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:5}},null,8,["modelValue"])]),_:1}),l(p,{cols:"12",md:"6"},{default:a(()=>[l(M,{modelValue:t.sessionDialog.form.recurrence,"onUpdate:modelValue":e[8]||(e[8]=o=>t.sessionDialog.form.recurrence=o),inset:"",color:"primary","true-value":!0,"false-value":!1,label:"تكرار أسبوعي"},null,8,["modelValue"])]),_:1})]),_:1}),l(C,{class:"my-4"})]),_:1}),l(U,null,{default:a(()=>[l(A),l(y,{variant:"text",onClick:e[9]||(e[9]=o=>t.sessionDialog.open=!1)},{default:a(()=>e[26]||(e[26]=[c("إلغاء")])),_:1}),l(y,{color:"primary",onClick:i.saveSession},{default:a(()=>[c(k(t.sessionDialog.mode==="create"?"إضافة":"تحديث"),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),l(B,{modelValue:t.attendeesDialog.open,"onUpdate:modelValue":e[14]||(e[14]=o=>t.attendeesDialog.open=o),"max-width":"720"},{default:a(()=>[l(w,null,{default:a(()=>[l(I,{class:"d-flex align-center"},{default:a(()=>[l(V,{icon:"ri-user-add-line",class:"me-2"}),e[27]||(e[27]=c(" إضافة طلاب للجلسة ")),l(A),l(y,{icon:"",variant:"text",onClick:e[11]||(e[11]=o=>t.attendeesDialog.open=!1)},{default:a(()=>[l(V,{icon:"ri-close-line"})]),_:1})]),_:1}),l(E,null,{default:a(()=>[e[28]||(e[28]=_("div",{class:"mb-4 text-medium-emphasis"}," اختر الطلاب المؤكدين في هذا الكورس لإضافتهم إلى الجلسة. الطلاب الموجودون مسبقًا محددون تلقائيًا. ",-1)),l(v,null,{default:a(()=>[l(p,{cols:"12"},{default:a(()=>[l(T,{modelValue:t.attendeesDialog.selectedIds,"onUpdate:modelValue":e[12]||(e[12]=o=>t.attendeesDialog.selectedIds=o),items:t.attendeesDialog.candidates,"item-title":"name","item-value":"id",label:"اختر الطلاب",variant:"outlined",loading:t.attendeesDialog.loading,disabled:t.attendeesDialog.loading,multiple:"",chips:"",clearable:""},null,8,["modelValue","items","loading","disabled"])]),_:1})]),_:1}),l(C,{class:"my-4"}),e[29]||(e[29]=_("div",{class:"text-subtitle-2 mb-2"},"الطلاب الحاليون في الجلسة",-1)),t.attendeesDialog.loading?(m(),h("div",X," جاري التحميل... ")):(m(),h("div",Z,[t.attendeesDialog.currentDetailed.length?(m(),h("div",R,[(m(!0),h(L,null,J(t.attendeesDialog.currentDetailed,o=>(m(),b(P,{key:o.student_id||o,size:"small",class:"ma-1",variant:"outlined",closable:"","onClick:close":g=>s.removeOneAttendee(o.student_id||o)},{default:a(()=>[c(k(o.student_name||o),1)]),_:2},1032,["onClick:close"]))),128))])):(m(),h("div",$," لا توجد قائمة حضور بعد "))]))]),_:1}),l(U,null,{default:a(()=>[l(A),l(y,{variant:"text",onClick:e[13]||(e[13]=o=>t.attendeesDialog.open=!1)},{default:a(()=>e[30]||(e[30]=[c("إلغاء")])),_:1}),l(y,{color:"primary",loading:t.attendeesDialog.loading,onClick:i.submitAddAttendees},{default:a(()=>e[31]||(e[31]=[c("حفظ")])),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(B,{modelValue:t.studentsViewDialog.open,"onUpdate:modelValue":e[17]||(e[17]=o=>t.studentsViewDialog.open=o),"max-width":"720"},{default:a(()=>[l(w,null,{default:a(()=>[l(I,{class:"d-flex align-center"},{default:a(()=>[l(V,{icon:"ri-team-line",class:"me-2"}),e[32]||(e[32]=c(" طلاب الجلسة ")),l(A),l(y,{icon:"",variant:"text",onClick:e[15]||(e[15]=o=>t.studentsViewDialog.open=!1)},{default:a(()=>[l(V,{icon:"ri-close-line"})]),_:1})]),_:1}),l(E,null,{default:a(()=>[t.studentsViewDialog.loading?(m(),h("div",ee," جاري التحميل... ")):(m(),h("div",te,[t.studentsViewDialog.students.length?(m(),b(v,{key:1},{default:a(()=>[(m(!0),h(L,null,J(t.studentsViewDialog.students,o=>(m(),b(p,{cols:"12",md:"6",key:o.student_id},{default:a(()=>[l(w,{variant:"tonal",class:"pa-3 d-flex align-center justify-space-between"},{default:a(()=>[_("div",null,[_("div",se,k(o.student_name),1),_("div",le,k(o.grade_name)+" • "+k(o.study_year),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(m(),b(K,{key:0,type:"info",variant:"tonal"},{default:a(()=>e[33]||(e[33]=[c(" لا يوجد طلاب مسجلون في هذه الجلسة بعد. ")])),_:1}))]))]),_:1}),l(U,null,{default:a(()=>[l(A),l(y,{color:"primary",variant:"tonal",onClick:e[16]||(e[16]=o=>t.studentsViewDialog.open=!1)},{default:a(()=>e[34]||(e[34]=[c("إغلاق")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t.endDialog.open?(m(),b(x,{key:0,modelValue:t.endDialog.open,"onUpdate:modelValue":e[18]||(e[18]=o=>t.endDialog.open=o),messages:t.endDialog.messages,title:t.endDialog.title,confirmButtonText:t.endDialog.confirmButtonText,onConfirm:i.handleEndSession},null,8,["modelValue","messages","title","confirmButtonText","onConfirm"])):O("",!0),t.deleteDialog.open?(m(),b(x,{key:1,modelValue:t.deleteDialog.open,"onUpdate:modelValue":e[19]||(e[19]=o=>t.deleteDialog.open=o),messages:t.deleteDialog.messages,title:t.deleteDialog.title,confirmButtonText:t.deleteDialog.confirmButtonText,onConfirm:i.handleDelete},null,8,["modelValue","messages","title","confirmButtonText","onConfirm"])):O("",!0),t.alert.open?(m(),b(S,{key:2,modelValue:t.alert.open,"onUpdate:modelValue":e[20]||(e[20]=o=>t.alert.open=o),type:t.alert.type,message:t.alert.message,closable:!0,"close-text":"موافق",onClose:e[21]||(e[21]=o=>t.alert.open=!1)},null,8,["modelValue","type","message"])):O("",!0)])}const Te=q(Q,[["render",ae]]);export{Te as default};
