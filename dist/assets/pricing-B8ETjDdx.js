import{r as P,m as $,c as y,o as i,d as o,f as h,b as a,h as z,t as n,s as c,b9 as D,e as s,F as A,x as B,D as E,A as T,B as Q,p as V,n as F,v as k}from"./index-N2EhsRQt.js";import j from"./teacher_api-DyrQANjO.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as M,V as R}from"./VRow--YcB0Yd0.js";import{V as w}from"./VCard-CTAW927Q.js";import{V as g}from"./VCardText-Q2eeque7.js";import{V as U}from"./VChip-v8q_B89j.js";import{V as q,a as G,b as H}from"./VList-BwysrA6o.js";import{V as J}from"./VSnackbar-HYFaETEv.js";import"./axios-CK0PAUQZ.js";import"./VAvatar-M6cRQjPV.js";import"./VImg-DOYF3Gzb.js";import"./VDivider-D-Cf14qE.js";const K={class:"text-center mb-6"},O={class:"text-h3 pricing-title pb-2"},W={key:0,class:"text-center py-10"},X={class:"text-h4 mb-1"},Y={class:"mb-0 text-body-1"},Z={class:"d-flex justify-center align-center"},ee={class:"text-h1 font-weight-medium text-primary"},te={key:0,class:"text-body-1 font-weight-medium align-self-end ms-2"},se={key:0,class:"text-caption mt-2"},re={__name:"AppPricing",props:{title:{type:String,default:"خطط التسعير"},cols:{type:[Number,String],default:12},sm:{type:[Number,String],default:6},md:{type:[Number,String],default:4},lg:{type:[Number,String],default:4},xl:{type:[Number,String],default:4}},setup(I){const d=I,_=P([]),v=P(!1),f=P({show:!1,message:"",color:"error"});async function C(){var b,t,e;v.value=!0;try{const m=await j.getActivePackages(),u=((t=(b=m.data)==null?void 0:b.data)==null?void 0:t.data)||((e=m.data)==null?void 0:e.data)||m,N=Array.isArray(u==null?void 0:u.data)?u.data:u;if(!Array.isArray(N))throw new Error("Invalid response data");const p=N.map(r=>{const l=r.isFree||r.price===0,x=l?0:r.price;return{id:r.id,name:r.name,tagLine:r.description||(l?"مجاناً للمعلمين الجدد":"ميزات متقدمة"),logo:l?"/images/gift-icon.png":"/images/star-icon.png",monthlyPrice:x,yearlyPrice:x*12,isPopular:!1,current:!!r.current,features:[`حتى ${r.maxStudents} طالب`,r.description||(l?"مجاناً للمعلمين الجدد":"ميزات متقدمة"),r.durationDays===30?"اشتراك شهري":`اشتراك ${r.durationDays} يوم`,"دعم فني مخصص"]}}),S=p.findIndex(r=>{var l,x;return((l=r.name)==null?void 0:l.trim())==="الباقة الاحترافية"||((x=r.name)==null?void 0:x.toLowerCase().includes("professional"))});if(S!==-1)p.forEach(r=>r.isPopular=!1),p[S].isPopular=!0;else{const r=p.findIndex(l=>l.monthlyPrice!==0);r!==-1&&(p[r].isPopular=!0)}_.value=p}catch(m){f.value={show:!0,message:"تعذر تحميل الباقات. يرجى المحاولة لاحقًا",color:"error"},console.warn("⚠️ Failed to fetch pricing plans:",m)}finally{v.value=!1}}return $(()=>{C()}),(b,t)=>(i(),y("div",null,[o("div",K,[z(b.$slots,"heading",{},()=>[o("h3",O,n(d.title),1)],!0),z(b.$slots,"subtitle",{},()=>[t[2]||(t[2]=o("p",{class:"mb-0"},[c(" تتضمن جميع الباقات أكثر من عدد طلاب. "),o("br"),c(" اختر الباقة الأنسب لاحتياجاتك. ")],-1))],!0)]),v.value?(i(),y("div",W,[a(D,{indeterminate:"",color:"primary",size:"64"}),t[3]||(t[3]=o("p",{class:"mt-4 text-body-1"},"جاري تحميل الباقات...",-1))])):_.value.length>0?(i(),h(R,{key:1},{default:s(()=>[(i(!0),y(A,null,B(_.value,e=>(i(),h(M,{key:e.id,cols:d.cols,sm:d.sm,md:d.md,lg:d.lg,xl:d.xl},{default:s(()=>[a(w,{flat:"",border:"",class:E([e.isPopular?"border-primary border-opacity-100":"","h-100"])},{default:s(()=>[a(g,{class:"text-end pt-4",style:{"block-size":"3.75rem"}},{default:s(()=>[T(a(U,{color:"primary",size:"small"},{default:s(()=>t[4]||(t[4]=[c(" الأكثر شعبية ")])),_:2},1536),[[Q,e.isPopular]])]),_:2},1024),a(g,{class:"text-center"},{default:s(()=>[a(V,{icon:e.monthlyPrice===0?"mdi-gift":"mdi-star",color:e.monthlyPrice===0?"success":"primary",size:"80",class:"mb-5"},null,8,["icon","color"]),o("h4",X,n(e.name),1),o("p",Y,n(e.tagLine),1)]),_:2},1024),a(g,{class:"position-relative text-center"},{default:s(()=>[o("div",null,[o("div",Z,[o("h1",ee,n(e.monthlyPrice===0?"مجاناً":new Intl.NumberFormat("ar-IQ").format(e.monthlyPrice)),1),e.monthlyPrice!==0?(i(),y("span",te," دينار/شهر ")):F("",!0)]),e.monthlyPrice!==0?(i(),y("div",se,n(new Intl.NumberFormat("ar-IQ").format(e.yearlyPrice))+" دينار/سنة ",1)):F("",!0)])]),_:2},1024),a(g,{class:"pt-2"},{default:s(()=>[a(q,{class:"card-list pb-5"},{default:s(()=>[(i(!0),y(A,null,B(e.features,(m,u)=>(i(),h(G,{key:u},{prepend:s(()=>[a(V,{size:14,icon:"mdi-check-circle",color:"success",class:"me-2"})]),default:s(()=>[a(H,{class:"text-body-1"},{default:s(()=>[c(n(m),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),a(k,{block:"",color:e.current?"success":"primary",variant:e.isPopular?"elevated":"outlined",size:"large"},{default:s(()=>[c(n(e.current?"باقتك الحالية":e.monthlyPrice===0?"ابدأ مجاناً":"اشترك الآن"),1)]),_:2},1032,["color","variant"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1032,["cols","sm","md","lg","xl"]))),128))]),_:1})):(i(),h(w,{key:2,flat:"",border:"",class:"text-center py-10"},{default:s(()=>[a(g,null,{default:s(()=>[a(V,{icon:"mdi-package-variant",size:"64",color:"grey",class:"mb-4"}),t[6]||(t[6]=o("h4",{class:"text-h5 mb-2"},"لا توجد باقات متاحة",-1)),t[7]||(t[7]=o("p",{class:"text-body-2 text-medium-emphasis"}," لم يتم العثور على أي باقات في الوقت الحالي ",-1)),a(k,{color:"primary",variant:"outlined",class:"mt-4",onClick:C},{default:s(()=>t[5]||(t[5]=[c(" إعادة المحاولة ")])),_:1})]),_:1})]),_:1})),a(J,{modelValue:f.value.show,"onUpdate:modelValue":t[1]||(t[1]=e=>f.value.show=e),color:f.value.color,location:"top",timeout:5e3},{actions:s(()=>[a(k,{variant:"text",onClick:t[0]||(t[0]=e=>f.value.show=!1)},{default:s(()=>t[8]||(t[8]=[c(" إغلاق ")])),_:1})]),default:s(()=>[c(n(f.value.message)+" ",1)]),_:1},8,["modelValue","color"])]))}},ae=L(re,[["__scopeId","data-v-4e6ab2a5"]]),oe={};function ie(I,d){const _=ae;return i(),h(w,null,{default:s(()=>[a(g,{class:"pt-12 pb-16 mx-5"},{default:s(()=>[a(_,{md:"4",cols:"12"})]),_:1})]),_:1})}const he=L(oe,[["render",ie]]);export{he as default};
